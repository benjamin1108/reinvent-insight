# -*- coding: utf-8 -*-
"""
结论生成提示词模板
"""

# 步骤三：生成洞见与金句的提示词模板
CONCLUSION_PROMPT_TEMPLATE = """
{role_and_style}

{base_prompt}

## 全局上下文
- **{content_type}**: {full_content}
- **已生成的全部正文内容**: 
{all_generated_chapters}

---
## 当前任务
你已经完成了报告所有正文章节的撰写。现在，你的任务是基于 **{content_description}** 和 **已生成的全部正文内容**，为整份报告撰写收尾部分。

## 具体任务
请生成以下两个部分：

1. **洞见延伸**（超越正文的独立思考，而非正文摘要）：
   - **定义**：基于正文事实进行**外延推理**，提供正文未明确提及的新视角
   - **数量**：不多于 10 条，具有可操作性的启示
   - ❌ **禁止**：
     * 复述正文已详细论述的观点
     * 以"文章提到..."或"正如第X章所述..."开头
     * 纯粹的事实还原（如"AWS通过风冷设计降低了TCO"）
   - ✅ **必须**：
     * 基于正文事实，推导出正文未直接阐述的结论
     * 每条洞见包含**新视角**或**外延启示**
   - **合格示例**：
     * 正文讲"AWS用风冷降成本" → 洞见可延伸至"这种策略对中小云厂商的启示"
     * 正文讲"Trainium3支持MoE" → 洞见可延伸至"MoE架构对芯片设计范式的长期影响"
   - **不合格示例**（这些是正文摘要，不是洞见）：
     * "AWS通过风冷设计降低了TCO"
     * "Trainium3的软件栈从 XLA 转向了原生 PyTorch"

2. **金句&原声引用**：
   - 从原文中挑选有代表性的原句，附中文翻译
   - **数量**：不多于 10 条

## 重要约束
- 输出的"洞见延伸"、"金句&原声引用"必须**结合已生成的全部正文内容**中所提到的内容
- **不要**输出原内容中有但正文内容中没有提到的内容
- 确保与正文的连贯性和一致性

## 输出格式要求
请严格按照以下格式输出，使用 Markdown H3 标题（`###`）：

### 洞见延伸格式示例
```markdown
### 洞见延伸
1. **[洞见标题：必须是新视角，而非正文要点]**
   [洞见详细内容，基于正文事实的外延推理，而非复述正文]

2. **[洞见标题]**
   [洞见详细内容]
...
```

### 金句&原声引用格式示例
```markdown
### 金句&原声引用

1. > **"[English original quote]"**
   > "[中文翻译]"

2. > **"[中文原声]"**
...
```

## 格式说明
- **洞见延伸**：每条洞见包含加粗的标题和详细的分析内容
  - ⚠️ 标题必须是**新视角**，不能是正文章节标题的复述
  - ⚠️ 内容必须是**外延推理**，不能是正文内容的摘要
- **金句&原声引用**：使用引用块格式（`>`），原文和译文都加粗
- 中文金句只需输出一行，不需要"原文"/"译文"标注

## 重要约束
- 必须使用 `### 洞见延伸` 和 `### 金句&原声引用` 作为标题
- 不要输出其他标题、大纲或任何正文内容
- 确保格式严格符合上述要求

{quality_control_rules}

---
**请开始生成洞见延伸和金句。**
"""
