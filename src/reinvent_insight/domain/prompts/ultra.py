# -*- coding: utf-8 -*-
"""
DeepInsight 模式提示词（包含普通模式和 Ultra 模式）
"""

# ========================================
# DEEP INSIGHT MODE ENHANCEMENTS (普通模式)
# ========================================

DEEP_OUTLINE_INSTRUCTIONS = """
## 叙事重构原则（Narrative Re-engineering）

**你是架构师，不是速记员**。你的任务是重新设计内容的叙事结构，而非照搬原文顺序。

- 如果原文先讲解决方案后讲问题，应将问题前置、方案后置
- 如果原文话题跳跃、缺乏逻辑链条，应按主题重新聚类
- 目标是形成「问题 → 分析 → 解决方案 → 验证」的完整逻辑闭环
- 允许合并分散但主题相同的内容，允许拆分过于臃肿的段落
- **禁止**凭空添加原文没有的内容

## 章节框架详细规划（核心要求）

为了避免并发生成时章节间的内容重复与逻辑割裂，**每个章节必须包含详细的内部框架**：

```json
{{
  "index": 1,
  "title": "章节标题",
  "subsections": [
    {{
      "subtitle": "子章节标题（可选，用于章节内部分段）",
      "key_points": ["该子章节必须覆盖的核心论点1", "核心论点2"]
    }}
  ],
  "opening_hook": "该章节的起始引子/切入点描述（如何开篇，用什么事实或数据引入）",
  "closing_transition": "该章节的结尾/过渡描述（如何收尾，与下一章如何衔接）",
  "must_include": ["必须包含的关键数据点", "必须引用的案例"],
  "must_exclude": ["绝对禁止涉及的内容（已在其他章节覆盖）"],
  "prev_chapter_link": "与上一章的逻辑关系",
  "next_chapter_link": "与下一章的逻辑关系"
}}
```

### 子章节设计原则

- **subsections 数组**：每章规划1-3个子章节，每个子章节聚焦一个核心论点
- **key_points 清晰**：明确列出每个子章节必须覆盖的论点
- **顺序逻辑**：子章节之间应有递进或并列的逻辑关系

### 章节边界与连接

- **opening_hook**：设计每章独特的开篇方式
- **closing_transition**：规划与下一章的自然过渡
- **must_exclude**：**强制负向约束** - 绝对禁止包含的内容，这是防止内容撞车的最强防火墙
- **prev_chapter_link / next_chapter_link**：建立章节间的逻辑链条
"""

# ========================================
# ULTRA DEEPINSIGHT MODE ENHANCEMENTS
# ========================================

ULTRA_OUTLINE_INSTRUCTIONS = """
## Ultra DeepInsight 模式特殊要求

本次生成为Ultra DeepInsight模式，需要更详尽的分析和更详细的章节框架：

### 0. 叙事重构原则（Narrative Re-engineering）

**你是架构师，不是速记员**。你的任务是重新设计内容的叙事结构，而非照搬原文顺序。

- 如果原文先讲解决方案后讲问题，应将问题前置、方案后置
- 如果原文话题跳跃、缺乏逻辑链条，应按主题重新聚类
- 目标是形成「问题 → 分析 → 解决方案 → 验证」的完整逻辑闭环
- 允许合并分散但主题相同的内容，允许拆分过于臃肿的段落
- **禁止**凭空添加原文没有的内容

### 1. 章节数量要求（硬性限制）
- 必须生成恰好18-20个章节
- 不可少于18章，不可超过20章
- 内容丰富时合并相近主题，而非无限拆分

### 2. 章节框架详细规划（核心要求）

**每个章节必须包含详细的内部框架，用于指导后续的并发扩写，避免章节间重复和割裂**：

```json
{{
  "index": 1,
  "title": "章节标题",
  "subsections": [
    {{
      "subtitle": "子章节标题（可选，用于章节内部分段）",
      "key_points": ["该子章节必须覆盖的核心论点1", "核心论点2"]
    }}
  ],
  "opening_hook": "该章节的起始引子/切入点描述（如何开篇，用什么事实或数据引入）",
  "closing_transition": "该章节的结尾/过渡描述（如何收尾，与下一章如何衔接）",
  "must_include": ["必须包含的关键数据点", "必须引用的案例", "必须提及的技术细节"],
  "must_exclude": ["绝对禁止涉及的内容（已在其他章节覆盖）", "绝对禁止讨论的话题"],
  "prev_chapter_link": "与上一章的逻辑关系（如：承接、对比、深化）",
  "next_chapter_link": "与下一章的逻辑关系（如：铺垫、过渡、引出）"
}}
```

### 3. 子章节设计原则

- **subsections 数组**：每章规划2-4个子章节，每个子章节聚焦一个核心论点
- **key_points 清晰**：明确列出每个子章节必须覆盖的论点，避免遗漏或重复
- **顺序逻辑**：子章节之间应有递进或并列的逻辑关系

### 4. 章节边界与连接

- **opening_hook**：设计每章独特的开篇方式，避免所有章节都以类似方式开始
- **closing_transition**：规划与下一章的自然过渡，确保阅读连贯性
- **must_exclude**：**强制负向约束** - 绝对禁止包含的内容（如「第5章只讲问题，绝对不许提第6章的解决方案」），这是防止内容撞车的最强防火墙

### 5. 深度与一致性

- 所有章节的 `generation_depth` 统一标注为 'detailed'
- 确保章节间的叙事风格和深度一致
- 通过 `prev_chapter_link` 和 `next_chapter_link` 建立章节间的逻辑链条
"""

ULTRA_CHAPTER_INSTRUCTIONS = """
## Ultra DeepInsight 章节生成要求

本章节为Ultra DeepInsight模式，需要超深度解读：

**字数要求**：
- 目标字数：约5000字
- 最低字数：不少于4500字
- 充分展开每个论点，提供详细的背景、案例和分析

**扩展策略**：
1. 如果原文该部分内容丰富，进行全面深入的解读
2. 如果原文该部分较简略，基于上下文和领域知识合理扩展：
   - 补充技术背景和行业上下文
   - 提供相关案例类比
   - 分析潜在影响和延伸思考
3. 所有扩展必须符合原文逻辑，不得偏离主题

**注意事项**：
- 保持高质量的专业表达
- 避免为凑字数而重复或空洞
- 确保内容对读者有实质价值
"""
