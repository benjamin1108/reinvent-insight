<!DOCTYPE html>
<html lang="zh-CN" class="h-full">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>reinvent Insight - 深度分析笔记</title>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&display=swap" rel="stylesheet" />
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script src="https://unpkg.com/marked/marked.min.js"></script>
  <script src="https://unpkg.com/@highlightjs/cdn-assets@11.9.0/highlight.min.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@11.9.0/styles/github-dark.min.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* 科技风格背景 */
    body {
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
      background-attachment: fixed;
      min-height: 100vh;
      font-family: 'JetBrains Mono', 'Consolas', 'SFMono-Regular', Menlo, monospace, 'PingFang SC', 'Microsoft YaHei', sans-serif;
    }

    .tech-gradient {
      background: linear-gradient(135deg, rgba(15, 23, 42, 0.9) 0%, rgba(30, 41, 59, 0.8) 50%, rgba(15, 23, 42, 0.9) 100%);
      backdrop-filter: blur(10px);
    }

    .glow-effect {
      box-shadow: 0 0 20px rgba(6, 182, 212, 0.1), 0 0 40px rgba(6, 182, 212, 0.05);
    }

    .glow-effect:hover {
      box-shadow: 0 0 30px rgba(6, 182, 212, 0.2), 0 0 60px rgba(6, 182, 212, 0.1);
      transition: box-shadow 0.3s ease;
    }

    /* 增强的 Markdown 样式 */
    .prose-tech {
      color: #e2e8f0;
      line-height: 1.8;
      font-size: 16px;
    }

    .prose-tech h1 {
      color: #06b6d4;
      font-size: 2.5rem;
      font-weight: 700;
      margin: 2rem 0 1.5rem 0;
      padding-bottom: 0.5rem;
      border-bottom: none;
      line-height: 1.2;
    }

    .prose-tech h2 {
      color: #0ea5e9;
      font-size: 2rem;
      font-weight: 600;
      margin: 2rem 0 1rem 0;
      line-height: 1.3;
      scroll-margin-top: 100px;
    }

    .prose-tech h3 {
      color: #38bdf8;
      font-size: 1.5rem;
      font-weight: 600;
      margin: 1.5rem 0 0.75rem 0;
      line-height: 1.4;
      scroll-margin-top: 100px;
    }

    .prose-tech h4 {
      color: #7dd3fc;
      font-size: 1.25rem;
      font-weight: 600;
      margin: 1.25rem 0 0.5rem 0;
      line-height: 1.4;
      scroll-margin-top: 100px;
    }

    .prose-tech h5 {
      color: #bae6fd;
      font-size: 1.125rem;
      font-weight: 600;
      margin: 1rem 0 0.5rem 0;
      line-height: 1.4;
      scroll-margin-top: 100px;
    }

    .prose-tech h6 {
      color: #e0f2fe;
      font-size: 1rem;
      font-weight: 600;
      margin: 1rem 0 0.5rem 0;
      line-height: 1.4;
      scroll-margin-top: 100px;
    }

    /* === 新增: 统一标题渐变色 & 章节分隔符 === */
    .prose-tech h1,
    .prose-tech h2,
    .prose-tech h3,
    .prose-tech h4,
    .prose-tech h5,
    .prose-tech h6 {
      background: linear-gradient(90deg, #06b6d4 0%, #3b82f6 50%, #9333ea 100%);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    /* 为一级标题添加科技感分隔符 */
    .prose-tech h1::after {
      content: '';
      display: block;
      height: 2px;
      margin-top: 1rem;
      background: linear-gradient(90deg, transparent, #3b82f6, transparent);
      border-radius: 9999px;
      opacity: 0.6;
    }

    .prose-tech p {
      margin: 1.25rem 0;
      line-height: 1.8;
    }

    .prose-tech ul,
    .prose-tech ol {
      margin: 1.25rem 0;
      padding-left: 1.5rem;
      line-height: 1.7;
    }

    .prose-tech li {
      margin: 0.5rem 0;
    }

    .prose-tech blockquote {
      border-left: 3px solid #334155;
      background: rgba(51,65,85,0.10);
      color: #b6c2d1;
      padding: 0.85rem 1.2rem;
      margin: 1.5rem 0;
      border-radius: 0 8px 8px 0;
      font-style: italic;
    }

    .prose-tech code {
      background: rgba(6, 182, 212, 0.1);
      color: #06b6d4;
      padding: 0.2rem 0.4rem;
      border-radius: 4px;
      font-size: 0.9em;
    }

    .prose-tech pre {
      background: #1e293b;
      border: 1px solid #374151;
      border-radius: 8px;
      padding: 1rem;
      margin: 1.5rem 0;
      overflow-x: auto;
    }

    .prose-tech pre code {
      background: none;
      color: inherit;
      padding: 0;
    }

    .prose-tech table {
      width: 100%;
      border-collapse: collapse;
      margin: 1.5rem 0;
      background: rgba(30, 41, 59, 0.5);
      border-radius: 8px;
      overflow: hidden;
    }

    .prose-tech th,
    .prose-tech td {
      border: 1px solid #374151;
      padding: 0.75rem 1rem;
      text-align: left;
    }

    .prose-tech th {
      background: rgba(6, 182, 212, 0.1);
      color: #06b6d4;
      font-weight: 600;
    }

    .prose-tech a {
      color: #06b6d4;
      text-decoration: none;
      border-bottom: 1px solid transparent;
      transition: border-color 0.2s;
    }

    .prose-tech a:hover {
      border-bottom-color: #06b6d4;
    }

    .prose-tech strong, .prose-tech b {
      color: #06b6d4;
      font-weight: 700;
    }

    .prose-tech em {
      color: #cbd5e1;
      font-style: italic;
    }

    .prose-tech hr {
      border: none;
      height: 2px;
      background: linear-gradient(90deg, transparent, #374151, transparent);
      margin: 2rem 0;
    }

    /* 目录样式 */
    .toc {
      background: rgba(30, 41, 59, 0.6);
      border: 1px solid #374151;
      border-radius: 12px;
      padding: 1.5rem;
      backdrop-filter: blur(10px);
      height: 100%;
      overflow-y: auto;
    }

    .toc h3 {
      color: #06b6d4;
      margin-bottom: 1rem;
      font-size: 1.25rem;
    }

    .toc ul {
      list-style: none;
      padding: 0;
    }

    .toc li {
      margin: 0.5rem 0;
    }

    .toc a {
      color: #94a3b8;
      text-decoration: none;
      transition: all 0.2s;
      display: block;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      cursor: pointer;
    }

    .toc a:hover {
      color: #06b6d4;
      background: rgba(6, 182, 212, 0.1);
    }

    .toc ul ul {
      margin-left: 1rem;
      border-left: 1px solid #374151;
      padding-left: 0.5rem;
    }

    /* 定制暗色滚动条，避免覆盖圆角背景 */
    .tech-gradient::-webkit-scrollbar,
    .toc::-webkit-scrollbar,
    .resizable::-webkit-scrollbar {
      width: 8px;
    }
    .tech-gradient::-webkit-scrollbar-track,
    .toc::-webkit-scrollbar-track,
    .resizable::-webkit-scrollbar-track {
      background: transparent;
      border-radius: 6px;
    }
    .tech-gradient::-webkit-scrollbar-thumb,
    .toc::-webkit-scrollbar-thumb,
    .resizable::-webkit-scrollbar-thumb {
      background: rgba(148, 163, 184, 0.4);
      border-radius: 6px;
    }
    .tech-gradient::-webkit-scrollbar-thumb:hover,
    .toc::-webkit-scrollbar-thumb:hover,
    .resizable::-webkit-scrollbar-thumb:hover {
      background: rgba(148, 163, 184, 0.6);
    }

    /* 调整 resizable 底部拖拽手柄颜色（WebKit） */
    .resizable::-webkit-resizer {
      background: rgba(148, 163, 184, 0.35);
    }

    /* 隐藏默认滚动条角落在 Firefox 等浏览器上的溢出覆盖 */
    .tech-gradient {
      scrollbar-color: rgba(148, 163, 184, 0.4) transparent;
      scrollbar-width: thin;
    }

    /* 目录收起时在桌面端使文档保持原宽度并居中 */
    @media (min-width: 1024px) {
      .no-toc-centered {
        width: 72%;
        margin-left: auto;
        margin-right: auto;
        transition: all 0.4s ease-in-out;
      }
    }

    /* ========== 移动端全面优化 ========== */
    @media (max-width: 768px) {
      /* 1. 字体大小优化 */
      .prose-tech {
        font-size: 14px;
        line-height: 1.7;
      }

      .prose-tech h1 {
        font-size: 1.8rem;
        margin: 1.5rem 0 1rem 0;
      }

      .prose-tech h2 {
        font-size: 1.5rem;
        margin: 1.5rem 0 0.8rem 0;
      }

      .prose-tech h3 {
        font-size: 1.3rem;
        margin: 1.2rem 0 0.6rem 0;
      }

      .prose-tech h4 {
        font-size: 1.1rem;
        margin: 1rem 0 0.5rem 0;
      }

      .prose-tech h5,
      .prose-tech h6 {
        font-size: 1rem;
        margin: 0.8rem 0 0.4rem 0;
      }

      .prose-tech p {
        margin: 1rem 0;
        line-height: 1.6;
      }

      .prose-tech ul,
      .prose-tech ol {
        margin: 1rem 0;
        padding-left: 1.2rem;
        line-height: 1.6;
      }

      .prose-tech li {
        margin: 0.3rem 0;
      }

      .prose-tech blockquote {
        padding: 0.6rem 1rem;
        margin: 1.2rem 0;
        font-size: 13px;
      }

      .prose-tech code {
        font-size: 12px;
        padding: 0.15rem 0.3rem;
      }

      .prose-tech pre {
        padding: 0.8rem;
        margin: 1.2rem 0;
        font-size: 12px;
      }

      .prose-tech table {
        font-size: 12px;
        margin: 1.2rem 0;
      }

      .prose-tech th,
      .prose-tech td {
        padding: 0.5rem 0.7rem;
      }

      /* 2. 阅读区域优化 */
      .resizable {
        resize: none !important;
        min-width: auto !important;
        padding: 1rem !important;
      }

      /* 3. 目录移动端优化 */
      .toc {
        font-size: 13px;
        padding: 1rem;
      }

      .toc h3 {
        font-size: 1.1rem;
        margin-bottom: 0.8rem;
      }

      .toc a {
        padding: 0.2rem 0.4rem;
        font-size: 12px;
      }

      /* 4. 卡片布局优化 */
      .summary-card {
        height: auto !important;
        min-height: auto !important;
        padding: 1rem !important;
      }

      .chinese-title-container {
        height: auto !important;
        min-height: 3rem;
      }

      .chinese-title {
        font-size: 14px !important;
        line-height: 1.4 !important;
      }

      .english-subtitle {
        font-size: 11px !important;
        line-height: 1.3 !important;
      }

      .english-title-area {
        min-height: 2.5rem !important;
      }

      .metadata-area {
        font-size: 10px !important;
        min-height: 1.5rem !important;
        padding-top: 0.4rem !important;
      }

      .metadata-badge {
        font-size: 8px !important;
        padding: 1px 4px !important;
      }

      /* 5. 导航栏移动端优化 */
      .mobile-nav {
        display: flex !important;
        flex-direction: column;
        gap: 0.5rem;
        width: 100%;
      }

      .mobile-nav button {
        padding: 0.6rem 1rem !important;
        font-size: 13px !important;
        text-align: center;
      }

      /* 6. 输入区域优化 */
      .mobile-input-card {
        padding: 1.5rem !important;
        margin: 1rem !important;
      }

      .mobile-input-card h2 {
        font-size: 1.5rem !important;
      }

      .mobile-input-card p {
        font-size: 13px !important;
      }

      .mobile-input-card input {
        padding: 0.7rem !important;
        font-size: 14px !important;
      }

      .mobile-input-card button {
        padding: 0.8rem !important;
        font-size: 14px !important;
      }

      /* 7. Header移动端优化 */
      .mobile-header {
        padding: 0.8rem 1rem !important;
        flex-direction: column;
        gap: 0.8rem;
      }

      .mobile-header h1 {
        font-size: 1.3rem !important;
      }

      /* 8. 网格布局移动端优化 */
      .mobile-grid {
        grid-template-columns: 1fr !important;
        gap: 1rem !important;
        padding: 0 1rem !important;
      }

      /* 9. 页面容器优化 */
      .mobile-container {
        max-width: 100% !important;
        padding: 1rem !important;
      }

      /* 10. 阅读页面移动端优化 */
      .mobile-reading {
        padding: 0.5rem !important;
      }

      .mobile-reading .tech-gradient {
        padding: 1rem !important;
        margin: 0.5rem 0 !important;
      }

      /* 11. 进度条区域优化 */
      .mobile-progress {
        padding: 1rem !important;
        margin: 1rem !important;
      }

      .mobile-progress h3 {
        font-size: 1.1rem !important;
      }

      .mobile-progress .text-sm {
        font-size: 12px !important;
      }

      /* 12. 隐藏桌面版拖拽功能 */
      .dragbar {
        display: none !important;
      }

      /* 13. 移动端完全隐藏目录功能 */
      .mobile-hide-toc .toc-sidebar,
      .mobile-hide-toc .dragbar {
        display: none !important;
      }

      /* 14. 移动端阅读页面header极致优化 */
      .mobile-reading-header {
        padding: 0.5rem 1rem !important;
        min-height: auto !important;
        border-bottom: 1px solid #374151;
      }

      .mobile-reading-header h1 {
        font-size: 1.1rem !important;
        margin: 0 !important;
        line-height: 1.2 !important;
      }

      .mobile-reading-header .header-content {
        flex-direction: row !important;
        justify-content: space-between !important;
        align-items: center !important;
        gap: 0.5rem !important;
        width: 100% !important;
      }

      .mobile-reading-header .mobile-back-btn {
        font-size: 12px !important;
        padding: 0.4rem 0.8rem !important;
        border-radius: 6px !important;
      }

      .mobile-reading-header .mobile-share-btn {
        padding: 0.4rem !important;
        border-radius: 6px !important;
      }

      .mobile-reading-header .mobile-share-btn svg {
        width: 16px !important;
        height: 16px !important;
      }

      /* 15. 移动端阅读内容区域最大化 */
      .mobile-reading-content {
        height: calc(100vh - 60px) !important; /* 减去极简header的高度 */
        overflow-y: auto !important;
      }

      .mobile-reading-content .tech-gradient {
        height: 100% !important;
        padding: 1rem !important;
        margin: 0 !important;
        border: none !important;
        border-radius: 0 !important;
        background: transparent !important;
      }

      /* 16. 移动端完全隐藏目录按钮 */
      .mobile-hide-toc-btn {
        display: none !important;
      }

      /* 17. Toast优化 */
      .mobile-toast {
        bottom: 2rem !important;
        left: 1rem !important;
        right: 1rem !important;
        width: auto !important;
      }
    }

    /* 超小屏幕优化 (iPhone SE等) */
    @media (max-width: 375px) {
      .prose-tech {
        font-size: 13px;
      }

      .prose-tech h1 {
        font-size: 1.6rem;
      }

      .prose-tech h2 {
        font-size: 1.3rem;
      }

      .prose-tech h3 {
        font-size: 1.2rem;
      }

      .chinese-title {
        font-size: 13px !important;
      }

      .english-subtitle {
        font-size: 10px !important;
      }

      .mobile-input-card {
        padding: 1rem !important;
        margin: 0.5rem !important;
      }

      .mobile-nav button {
        padding: 0.5rem 0.8rem !important;
        font-size: 12px !important;
      }
    }

    /* 动画效果 */
    .fade-in {
      animation: fadeIn 0.5s ease-in;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .slide-in {
      animation: slideIn 0.3s ease-out;
    }

    @keyframes slideIn {
      from {
        transform: translateX(-20px);
        opacity: 0;
      }

      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    /* 卡片优化 */
    .summary-card {
      display: flex;
      flex-direction: column;
      height: auto;
      min-height: 160px;
    }

    .summary-card h3 {
      word-wrap: break-word;
      overflow-wrap: break-word;
      hyphens: auto;
      line-height: 1.4;
    }

    /* Grid 自动行高 */
    .auto-rows-fr {
      grid-auto-rows: 1fr;
    }

    /* 可调整大小阅读卡片 */
    .resizable {
      resize: horizontal; /* 恢复默认底角拖拽 */
      overflow: auto;
      max-width: 100%;
      min-width: 400px;
    }

    /* 目录拖拽分隔条 */
    .dragbar {
      width: 6px;
      cursor: col-resize;
      background: rgba(100, 116, 139, 0.4);
    }

    /* 多行文本截断 */
    .line-clamp-3 {
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    /* 卡片布局优化 */
    .summary-card {
      transition: all 0.3s ease;
      display: flex;
    }

    /* ========== 分类展示样式 ========== */
    .section-container {
      position: relative;
    }

    .section-header {
      position: relative;
      padding-bottom: 0.5rem;
    }

    .section-header::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, #374151, transparent);
    }

    .reinvent-card {
      position: relative;
      background: linear-gradient(135deg, rgba(30, 41, 59, 0.9) 0%, rgba(55, 65, 81, 0.8) 50%, rgba(30, 41, 59, 0.9) 100%);
      border: 1px solid rgba(251, 146, 60, 0.3);
    }

    .reinvent-card:hover {
      border-color: rgba(249, 115, 22, 0.6);
      box-shadow: 0 0 30px rgba(249, 115, 22, 0.15), 0 0 60px rgba(249, 115, 22, 0.08);
    }

    .other-card {
      position: relative;
    }

    .category-glow {
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      border-radius: 12px;
      opacity: 0;
      transition: opacity 0.3s ease;
      pointer-events: none;
    }

    .reinvent-card .category-glow {
      background: linear-gradient(45deg, #f97316, #ea580c, #dc2626, #f97316);
      background-size: 300% 300%;
      animation: gradient-shift 3s ease infinite;
    }

    .other-card .category-glow {
      background: linear-gradient(45deg, #06b6d4, #3b82f6, #8b5cf6, #06b6d4);
      background-size: 300% 300%;
      animation: gradient-shift 3s ease infinite;
    }

    .summary-card:hover .category-glow {
      opacity: 0.3;
    }

    @keyframes gradient-shift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    /* 已移除：原右上角类型标签样式，现在使用元数据区的metadata-badge */

    /* 标题区域优化 */
    .title-with-badge {
      padding-right: 0; /* 移除为标签预留的右边距 */
    }

    .summary-card {
      flex-direction: column;
    }

    .summary-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 32px rgba(6, 182, 212, 0.15), 0 4px 16px rgba(6, 182, 212, 0.1);
    }

    /* 英文标题区域优化 */
    .summary-card .english-title-area {
      min-height: 3.5rem; /* 给英文标题更多空间 */
      display: flex;
      align-items: flex-start;
    }

    /* 中文标题样式 - 默认科技感 */
    .chinese-title {
      color: rgb(12, 175, 193); /* 提高饱和度、降低明度的蓝色 */
      transition: all 0.3s ease;
    }

    .summary-card:hover .chinese-title {
      background: linear-gradient(135deg, #22d3ee 0%, #3b82f6 35%, #8b5cf6 70%, #ec4899 100%);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    /* 英文副标题样式 */
    .english-subtitle {
      color: #64748b; /* 更低饱和度的灰色 */
      opacity: 0.8;
      font-weight: 400;
      letter-spacing: 0.01em;
      transition: all 0.3s ease;
    }

    .summary-card:hover .english-subtitle {
      color: #6b7280; /* hover时稍微提亮但仍然低调 */
      opacity: 0.9;
    }

    /* 中文标题容器优化 - 使用全宽 */
    .chinese-title-container {
      height: 4rem; /* 固定高度，适应更小字体的3行空间 */
      display: flex;
      align-items: flex-start;
      width: 100%; /* 使用全宽 */
    }

    /* 元数据区域优化 */
    .metadata-area {
      border-top: 1px solid;
      padding-top: 0.5rem;
      margin-top: auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      min-height: 1.75rem; /* 固定最小高度 */
    }

    /* 类型标签在元数据区的样式 */
    .metadata-badge {
      font-size: 9px;
      padding: 2px 6px;
      font-weight: 600;
      letter-spacing: 0.02em;
      text-transform: uppercase;
      border-radius: 6px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
      backdrop-filter: blur(4px);
    }

    .reinvent-card .metadata-badge {
      background: linear-gradient(135deg, rgba(234, 88, 12, 0.9), rgba(220, 38, 38, 0.9));
      border: 1px solid rgba(249, 115, 22, 0.3);
      color: white;
    }

    .other-card .metadata-badge {
      background: linear-gradient(135deg, rgba(8, 145, 178, 0.9), rgba(29, 78, 216, 0.9));
      border: 1px solid rgba(6, 182, 212, 0.3);
      color: white;
    }

    /* 调整大小的手柄 */
    #resize-handle {
      width: 16px;
      height: 100%;
      position: absolute;
      right: 0;
      top: 0;
      cursor: col-resize;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: transparent;
      transition: background-color 0.2s;
    }

    #resize-handle:hover {
      background-color: rgba(6, 182, 212, 0.1);
    }

    #resize-handle::after {
      content: '';
      width: 2px;
      height: 24px;
      background-color: #374151;
      border-radius: 9999px;
      transition: background-color 0.2s;
    }

    #resize-handle:hover::after {
      background-color: #06b6d4;
    }

    /* 登录和分享模态框样式 */
    .modal {
      position: fixed;
    }

    .fade-enter-active,
    .fade-leave-active {
      transition: opacity 0.3s ease;
    }

    .fade-enter-from,
    .fade-leave-to {
      opacity: 0;
    }

    /* ========== 统一科技感按钮风格 ========== */
    .tech-btn {
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      font-weight: 500;
      font-size: 0.875rem;
      transition: all 0.3s ease;
      border: 1px solid transparent;
      backdrop-filter: blur(10px);
      cursor: pointer;
      overflow: hidden;
      /* 统一固定尺寸 */
      min-width: 120px;
      height: 40px;
      white-space: nowrap;
    }

    .tech-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
      transition: left 0.5s;
    }

    .tech-btn:hover::before {
      left: 100%;
    }

    /* 主要按钮 - 蓝色科技风 */
    .tech-btn-primary {
      background: linear-gradient(135deg, rgba(6, 182, 212, 0.2), rgba(59, 130, 246, 0.2));
      border-color: rgba(6, 182, 212, 0.4);
      color: #22d3ee;
      box-shadow: 0 0 20px rgba(6, 182, 212, 0.1);
    }

    .tech-btn-primary:hover {
      background: linear-gradient(135deg, rgba(6, 182, 212, 0.3), rgba(59, 130, 246, 0.3));
      border-color: rgba(6, 182, 212, 0.6);
      color: #06b6d4;
      box-shadow: 0 0 30px rgba(6, 182, 212, 0.2);
      transform: translateY(-1px);
    }

    .tech-btn-primary:active {
      transform: translateY(0);
    }

    /* 次要按钮 - 灰色科技风 */
    .tech-btn-secondary {
      background: linear-gradient(135deg, rgba(75, 85, 99, 0.3), rgba(55, 65, 81, 0.3));
      border-color: rgba(75, 85, 99, 0.5);
      color: #d1d5db;
      box-shadow: 0 0 15px rgba(75, 85, 99, 0.1);
    }

    .tech-btn-secondary:hover {
      background: linear-gradient(135deg, rgba(75, 85, 99, 0.4), rgba(55, 65, 81, 0.4));
      border-color: rgba(107, 114, 128, 0.6);
      color: #f3f4f6;
      box-shadow: 0 0 25px rgba(107, 114, 128, 0.15);
      transform: translateY(-1px);
    }

    /* 成功按钮 - 绿色科技风 */
    .tech-btn-success {
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(34, 197, 94, 0.2));
      border-color: rgba(16, 185, 129, 0.4);
      color: #34d399;
      box-shadow: 0 0 20px rgba(16, 185, 129, 0.1);
    }

    .tech-btn-success:hover {
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.3), rgba(34, 197, 94, 0.3));
      border-color: rgba(16, 185, 129, 0.6);
      color: #10b981;
      box-shadow: 0 0 30px rgba(16, 185, 129, 0.2);
      transform: translateY(-1px);
    }

    /* 警告按钮 - 橙色科技风 */
    .tech-btn-warning {
      background: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(251, 146, 60, 0.2));
      border-color: rgba(245, 158, 11, 0.4);
      color: #fbbf24;
      box-shadow: 0 0 20px rgba(245, 158, 11, 0.1);
    }

    .tech-btn-warning:hover {
      background: linear-gradient(135deg, rgba(245, 158, 11, 0.3), rgba(251, 146, 60, 0.3));
      border-color: rgba(245, 158, 11, 0.6);
      color: #f59e0b;
      box-shadow: 0 0 30px rgba(245, 158, 11, 0.2);
      transform: translateY(-1px);
    }

    /* 危险按钮 - 红色科技风 */
    .tech-btn-danger {
      background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(220, 38, 38, 0.2));
      border-color: rgba(239, 68, 68, 0.4);
      color: #f87171;
      box-shadow: 0 0 20px rgba(239, 68, 68, 0.1);
    }

    .tech-btn-danger:hover {
      background: linear-gradient(135deg, rgba(239, 68, 68, 0.3), rgba(220, 38, 38, 0.3));
      border-color: rgba(239, 68, 68, 0.6);
      color: #ef4444;
      box-shadow: 0 0 30px rgba(239, 68, 68, 0.2);
      transform: translateY(-1px);
    }

    /* 小尺寸按钮 */
    .tech-btn-sm {
      padding: 0.375rem 0.75rem;
      font-size: 0.8rem;
      border-radius: 6px;
    }

    /* 大尺寸按钮 */
    .tech-btn-lg {
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      border-radius: 10px;
    }

    /* 禁用状态 */
    .tech-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none !important;
    }

    .tech-btn:disabled:hover {
      transform: none !important;
      box-shadow: initial !important;
    }

    /* 图标按钮 */
    .tech-btn-icon {
      padding: 0.5rem;
      width: 2.5rem;
      height: 2.5rem;
      border-radius: 8px;
    }

    .tech-btn-icon svg {
      width: 1.25rem;
      height: 1.25rem;
      transition: transform 0.3s ease;
    }

    .tech-btn-icon:hover svg {
      transform: scale(1.1);
    }

    /* 阅读页面专用按钮组 */
    .reading-controls {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .reading-controls .tech-btn {
      min-width: auto;
    }

    /* 移动端按钮优化 */
    @media (max-width: 768px) {
      .tech-btn {
        padding: 0.4rem 0.8rem;
        font-size: 0.8rem;
        /* 移动端也保持固定尺寸 */
        min-width: 100px;
        height: 36px;
      }

      /* 移动端导航按钮平分宽度 */
      .mobile-nav .tech-btn.flex-1 {
        min-width: 0;
        flex: 1;
      }

      .tech-btn-sm {
        padding: 0.3rem 0.6rem;
        font-size: 0.75rem;
        min-width: 100px;
        height: 36px;
      }

      .tech-btn-icon {
        width: 100px;
        height: 36px;
        padding: 0.4rem;
      }

      .tech-btn-icon svg {
        width: 1.1rem;
        height: 1.1rem;
      }
    }
  </style>
</head>

<body class="h-full flex flex-col" id="app">
  <!-- 普通页面Header -->
  <header v-if="currentView !== 'read'" class="tech-gradient border-b border-gray-800 shadow-lg">
    <div class="max-w-full mx-auto px-4 py-4 md:flex md:items-center md:justify-between mobile-header">
      <div class="flex items-center justify-between w-full md:w-auto">
        <!-- 品牌标识和PC端导航按钮组 -->
        <div class="flex items-center space-x-4">
          <h1 class="text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500">
            reinvent <span class="text-purple-400">Insight</span>
          </h1>
          
          <!-- PC端紧贴品牌标识的导航按钮 -->
          <div class="hidden md:flex space-x-2">
            <button @click="currentView = 'create'"
              :class="currentView === 'create' ? 'tech-btn tech-btn-secondary' : 'tech-btn tech-btn-secondary'">
              创建深度解读
            </button>
            <button @click="currentView = 'library'"
              :class="currentView === 'library' ? 'tech-btn tech-btn-secondary' : 'tech-btn tech-btn-secondary'">
              浏览笔记库
            </button>
          </div>
        </div>
        
        <!-- 移动端登录/退出按钮 -->
        <div class="md:hidden">
          <button v-if="!isAuthenticated" @click="showLogin = true"
            class="tech-btn tech-btn-secondary">
            登录
          </button>
          <button v-else @click="logout"
            class="tech-btn tech-btn-danger">
            退出
          </button>
        </div>
      </div>
      
      <!-- 移动端导航按钮 -->
      <div class="md:hidden mobile-nav flex gap-2 mt-3">
        <button @click="currentView = 'create'"
          :class="currentView === 'create' ? 'tech-btn tech-btn-secondary flex-1' : 'tech-btn tech-btn-secondary flex-1'">
          创建深度解读
        </button>
        <button @click="currentView = 'library'"
          :class="currentView === 'library' ? 'tech-btn tech-btn-secondary flex-1' : 'tech-btn tech-btn-secondary flex-1'">
          浏览笔记库
        </button>
      </div>

      <!-- 桌面端右侧内容 -->
      <div class="hidden md:flex items-center space-x-4">
        <div class="text-sm text-gray-400">
          <!-- <span class="hidden sm:inline">AI 驱动的</span> YouTube 深度分析 -->
        </div>
        <!--  GitHub 图标独立容器 -->
        <!-- <div class="flex items-center">
          <a href="https://github.com" target="_blank" class="text-gray-400 hover:text-cyan-400 transition-colors p-2 hover:bg-gray-800/50 rounded-lg">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd"
                d="M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0710 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z"
                clip-rule="evenodd"></path>
            </svg>
          </a>
        </div>  -->
        
        <!-- 桌面端登录/退出按钮独立容器 -->
        <div class="flex items-center">
          <button v-if="!isAuthenticated" @click="showLogin = true"
            class="tech-btn tech-btn-secondary">
            登录
          </button>
          <button v-else @click="logout"
            class="tech-btn tech-btn-danger">
            退出
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- 阅读页面专用Header -->
  <header v-if="currentView === 'read'" class="tech-gradient border-b border-gray-800 shadow-lg mobile-reading-header">
    <div class="max-w-full mx-auto px-4 py-3 flex items-center justify-between header-content">
      <div class="flex items-center space-x-4">
        <h1 class="text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500">
          reinvent <span class="text-purple-400">Insight</span>
        </h1>
        
        <!-- PC端紧贴品牌标识的按钮组 -->
        <div class="hidden md:flex reading-controls">
          <!-- 返回按钮 -->
          <button @click="currentView = 'library'"
            class="tech-btn tech-btn-secondary">
            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
            </svg>
            返回笔记库
          </button>
          
          <!-- 分享按钮 -->
          <button @click="shareDocument" :disabled="shareLoading"
            class="tech-btn tech-btn-secondary"
            :title="shareLoading ? '生成中...' : '分享文档'">
            <svg v-if="!shareLoading" class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path>
            </svg>
            <svg v-else class="w-4 h-4 mr-1 animate-spin" fill="none" viewBox="0 0 24 24">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            分享文档
          </button>
          
          <!-- 目录切换按钮 -->
          <button @click="toggleToc"
            class="tech-btn tech-btn-secondary mobile-hide-toc-btn"
            :title="showToc ? '隐藏目录' : '显示目录'">
            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                    :d="showToc ? 'M6 18L18 6M6 6l12 12' : 'M4 6h16M4 12h16M4 18h7'"></path>
            </svg>
            {{ showToc ? '隐藏目录' : '显示目录' }}
          </button>
        </div>
      </div>
      
      <!-- 移动端按钮组 -->
      <div class="md:hidden flex items-center space-x-2">
        <!-- 返回按钮 -->
        <button @click="currentView = 'library'"
          class="tech-btn tech-btn-secondary mobile-back-btn">
          <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
          </svg>
          返回
        </button>
        
        <!-- 分享按钮 -->
        <button @click="shareDocument" :disabled="shareLoading"
          class="tech-btn tech-btn-secondary mobile-share-btn"
          :title="shareLoading ? '生成中...' : '分享文档'">
          <svg v-if="!shareLoading" class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path>
          </svg>
          <svg v-else class="w-4 h-4 mr-1 animate-spin" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
          </svg>
          分享
        </button>
      </div>
    </div>
  </header>

  <!-- App Root -->
  <div class="flex-1 overflow-auto">
    <!-- 创建摘要页面：任何状态下都可见 -->
    <div v-if="currentView === 'create'" class="max-w-4xl mx-auto p-6 fade-in mobile-container">
      <!-- Input Card -->
      <div class="tech-gradient border border-gray-700 rounded-xl p-8 shadow-2xl mb-8 glow-effect mobile-input-card">
        <div class="text-center mb-6">
          <h2 class="text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500 mb-2">
            reInvent Insights </h2>
          <p class="text-gray-400">输入 YouTube 链接，获得深度解读</p>
        </div>

        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium mb-2 text-cyan-400">YouTube 视频链接</label>
            <input v-model="url" @keyup.enter="startSummarize" :disabled="loading" type="url" placeholder="https://www.youtube.com/watch?v=..."
              class="w-full px-4 py-3 bg-gray-800/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent disabled:opacity-50 transition-all" />
          </div>

          <button :disabled="loading || !url || !isValidYoutubeUrl(url)" @click="startSummarize"
            class="w-full tech-btn tech-btn-secondary">
            <span v-if="!loading" class="flex items-center justify-center">
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z">
                </path>
              </svg>
              开始分析
            </span>
            <span v-else class="flex items-center justify-center">
              <svg class="w-5 h-5 mr-2 animate-spin" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor"
                  d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                </path>
              </svg>
              AI 分析中...
            </span>
        </button>
        </div>
      </div>
      
      <!-- Progress & Logs -->
      <div v-if="loading || logs.length"
        class="bg-gray-900/50 border border-gray-700 rounded-xl p-6 shadow-xl mb-8 backdrop-blur-sm mobile-progress">
        <!-- 进度条 -->
        <div class="w-full h-2 bg-gray-800 rounded-full overflow-hidden mb-4">
          <div class="h-full bg-gradient-to-r from-cyan-500 to-blue-600 transition-all duration-300" :style="{ width: progressPercent + '%' }"></div>
        </div>
        <h3 class="text-xl font-semibold mb-4 text-cyan-400 flex items-center">
          <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
          </svg>
          处理进度
        </h3>
        <div class="space-y-2">
          <div v-for="(log, index) in logs" :key="index" class="flex items-center text-sm slide-in">
            <div class="w-2 h-2 bg-green-500 rounded-full mr-3 flex-shrink-0"></div>
            <span class="text-gray-300">{{ log }}</span>
          </div>
          <div v-if="loading && currentStep < totalSteps" class="flex items-center text-sm text-gray-400">
            <div class="w-2 h-2 bg-cyan-500 rounded-full mr-3 animate-pulse flex-shrink-0"></div>
            <span>AI 正在处理，请稍候...</span>
          </div>
        </div>
      </div>

      <!-- Result -->
      <div v-if="summary" class="fade-in">
        <div class="bg-gray-900/30 border border-gray-700 rounded-xl p-8 shadow-2xl backdrop-blur-sm">
          <div class="flex items-center justify-between mb-6">
            <h2 class="text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500">
              {{ title }}
            </h2>
            <button @click="viewSummary(title, summary)"
              class="px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 rounded-lg text-white font-medium transition-all duration-200 transform hover:scale-105">
              全屏阅读
            </button>
          </div>
          <div v-html="rendered" class="prose-tech"></div>
        </div>
      </div>
    </div>

    <!-- 笔记库页面 -->
    <div v-if="currentView === 'library'" class="max-w-6xl mx-auto p-6 fade-in mobile-container">
      <div class="mb-8">
        <h2 class="text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500 mb-2">
          笔记库
        </h2>
        <p class="text-gray-400">浏览深度分析笔记</p>
      </div>

      <!-- 加载状态 -->
      <div v-if="libraryLoading" class="flex items-center justify-center py-12">
        <div class="text-center">
          <svg class="w-8 h-8 animate-spin text-cyan-500 mx-auto mb-4" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor"
              d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
            </path>
          </svg>
          <p class="text-gray-400">加载笔记中...</p>
        </div>
      </div>

      <!-- 分类展示笔记列表 -->
      <div v-else-if="summaries.length > 0" class="space-y-12">
        
        <!-- AWS re:Invent 专区 -->
        <div v-if="categorizedSummaries.reinvent.length > 0" class="section-container">
          <div class="flex items-center mb-6 section-header">
            <div class="flex items-center">
              <div class="w-3 h-3 bg-gradient-to-r from-orange-500 to-red-600 rounded-full mr-3 glow-effect"></div>
              <h3 class="text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-orange-400 to-red-500">
                AWS re:Invent 深度解读
            </h3>
          </div>
            <div class="ml-auto flex items-center text-sm text-gray-500">
              <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
              </svg>
              {{ categorizedSummaries.reinvent.length }} 篇
            </div>
          </div>
          
          <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3 mobile-grid">
            <div v-for="summary in categorizedSummaries.reinvent" :key="summary.filename" @click="loadSummary(summary.filename)"
              class="summary-card tech-gradient border border-orange-700/50 rounded-xl p-6 cursor-pointer hover:border-orange-500 transition-all duration-200 glow-effect group flex flex-col h-56 reinvent-card relative">
              
              <!-- 中文标题区域 - 使用全宽 -->
              <div class="mb-3 chinese-title-container">
                <h3 class="text-base font-bold leading-snug line-clamp-3 chinese-title text-orange-100" 
                    :title="summary.title_cn">
                  {{ summary.title_cn }}
                </h3>
              </div>
              
              <!-- 英文标题 -->
              <div class="flex-1 mb-2 english-title-area">
                <p class="text-xs text-orange-300/70 group-hover:text-orange-300 font-normal leading-relaxed break-words w-full english-subtitle" 
                   :title="summary.title_en">
                  {{ summary.title_en }}
                </p>
              </div>
              
              <!-- 元信息区域 -->
              <div class="metadata-area border-orange-700/30 text-xs text-orange-400/80">
                <div class="flex items-center space-x-3">
                  <div class="flex items-center">
                    <svg class="w-3 h-3 mr-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z">
                      </path>
                    </svg>
                    <span>{{ formatWordCount(summary.size) }}</span>
                  </div>
                  <div class="flex items-center">
                    <svg class="w-3 h-3 mr-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <span>{{ calculateReadTime(summary.size) }}</span>
                  </div>
                </div>
                
                <!-- 类型标签移到元数据区右侧 -->
                <div class="metadata-badge">
                  reinvent
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 其他精选内容 -->
        <div v-if="categorizedSummaries.other.length > 0" class="section-container">
          <div class="flex items-center mb-6 section-header">
            <div class="flex items-center">
              <div class="w-3 h-3 bg-gradient-to-r from-cyan-500 to-blue-600 rounded-full mr-3 glow-effect"></div>
              <h3 class="text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500">
                其他精选内容
              </h3>
            </div>
            <div class="ml-auto flex items-center text-sm text-gray-500">
              <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
              </svg>
              {{ categorizedSummaries.other.length }} 篇
            </div>
          </div>
          
          <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3 mobile-grid">
            <div v-for="summary in categorizedSummaries.other" :key="summary.filename" @click="loadSummary(summary.filename)"
              class="summary-card tech-gradient border border-gray-700 rounded-xl p-6 cursor-pointer hover:border-cyan-500 transition-all duration-200 glow-effect group flex flex-col h-56 other-card relative">
              
              <!-- 中文标题区域 - 使用全宽 -->
              <div class="mb-3 chinese-title-container">
                <h3 class="text-base font-bold leading-snug line-clamp-3 chinese-title" 
                    :title="summary.title_cn">
                  {{ summary.title_cn }}
                </h3>
              </div>
              
              <!-- 英文标题 -->
              <div class="flex-1 mb-2 english-title-area">
                <p class="text-xs text-gray-500 group-hover:text-gray-400 font-normal leading-relaxed break-words w-full english-subtitle" 
                   :title="summary.title_en">
                  {{ summary.title_en }}
                </p>
              </div>
              
              <!-- 元信息区域 -->
              <div class="metadata-area border-gray-700/50 text-xs text-gray-500">
                <div class="flex items-center space-x-3">
                  <div class="flex items-center">
                    <svg class="w-3 h-3 mr-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z">
                      </path>
                    </svg>
                    <span>{{ formatWordCount(summary.size) }}</span>
                  </div>
                  <div class="flex items-center">
                    <svg class="w-3 h-3 mr-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <span>{{ calculateReadTime(summary.size) }}</span>
                  </div>
                </div>
                
                <!-- 类型标签移到元数据区右侧 -->
                <div class="metadata-badge">
                  featured
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 空状态 -->
      <div v-else class="text-center py-12">
        <svg class="w-16 h-16 text-gray-600 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z">
          </path>
        </svg>
        <h3 class="text-xl font-semibold text-gray-400 mb-2">暂无笔记</h3>
        <p class="text-gray-500 mb-6">开始创建您的第一个 AI 分析笔记</p>
        <button @click="currentView = 'create'"
          class="tech-btn tech-btn-secondary">
          创建摘要
        </button>
      </div>
    </div>

    <!-- 阅读页面 - 全宽布局 -->
    <div v-if="currentView === 'read'" class="w-full h-full fade-in flex mobile-reading mobile-hide-toc mobile-reading-content">
        <!-- 目录侧边栏 - 移动端完全隐藏 -->
      <div v-if="showToc" :style="{ width: tocWidth + 'px' }" class="toc-sidebar flex-shrink-0 border-r border-gray-800 bg-gray-900/30 px-6 py-4 h-full flex flex-col">
        <div class="h-full overflow-y-auto">
            <div class="toc">
              <h3>目录</h3>
              <div v-html="tocHtml" @click="handleTocClick"></div>
            </div>
          </div>
        </div>

        <!-- 拖拽分隔条 - 移动端完全隐藏 -->
        <div v-if="showToc" class="dragbar" @mousedown="initDrag"></div>

        <!-- 文章内容 - 全宽 -->
      <div class="flex-1 min-w-0 px-4 py-4">
        <div v-if="readingContent" :class="['tech-gradient border border-gray-700 rounded-xl p-10 shadow-2xl backdrop-blur-sm resizable h-full overflow-y-auto', !showToc ? 'no-toc-centered' : '']">
              <div v-html="readingContent" class="prose-tech max-w-none"></div>
            </div>
        <div v-else class="h-full flex items-center justify-center">
          <div class="text-center">
              <svg class="w-8 h-8 animate-spin text-cyan-500 mx-auto mb-4" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor"
                  d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 714 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                </path>
              </svg>
              <p class="text-gray-400">加载中...</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast 提示 -->
  <div v-if="showToastModal" class="fixed top-4 right-4 z-50 max-w-sm mobile-toast">
    <div 
      :class="{
        'bg-green-600 border-green-500': toastType === 'success',
        'bg-red-600 border-red-500': toastType === 'error',
        'bg-blue-600 border-blue-500': toastType === 'info'
      }"
      class="border rounded-lg p-4 shadow-lg text-white fade-in"
    >
      <div class="flex items-center">
        <svg v-if="toastType === 'success'" class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
        </svg>
        <svg v-else-if="toastType === 'error'" class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
        <svg v-else class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <span class="text-sm font-medium">{{ toastMessage }}</span>
      </div>
    </div>
  </div>

  <!-- 登录模态框 -->
  <div v-if="showLogin" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
    <div class="bg-gray-800 border border-gray-600 rounded-xl p-8 w-96 shadow-xl tech-gradient">
      <h2 class="text-xl font-bold text-cyan-400 mb-4">登录</h2>
      <div class="space-y-4">
        <div>
          <label class="block text-sm text-gray-300 mb-1">用户名</label>
          <input v-model="loginUsername" @keyup.enter="submitLogin" type="text" class="w-full px-3 py-2 rounded bg-gray-900 border border-gray-700 text-gray-100 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500" />
        </div>
        <div>
          <label class="block text-sm text-gray-300 mb-1">密码</label>
          <input v-model="loginPassword" @keyup.enter="submitLogin" type="password" class="w-full px-3 py-2 rounded bg-gray-900 border border-gray-700 text-gray-100 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500" />
        </div>
        <div class="flex justify-end space-x-2 pt-2">
          <button @click="showLogin = false" class="tech-btn tech-btn-secondary">取消</button>
          <button @click="submitLogin" class="tech-btn tech-btn-secondary">
            登录
          </button>
        </div>
      </div>
    </div>
  </div>

  <script>
    const { createApp, ref, computed, onMounted } = Vue;

    // 配置 marked 和 highlight.js
    marked.setOptions({
      highlight: function (code, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(code, { language: lang }).value;
          } catch (__) { }
        }
        return hljs.highlightAuto(code).value;
      },
      breaks: true,
      gfm: true
    });

    createApp({
      setup() {
        // 状态管理
        const currentView = ref('library');
        const url = ref('');
        const loading = ref(false);
        const logs = ref([]);
        const totalSteps = 4;
        const currentStep = ref(0); // 0-4
        const summary = ref('');
        const title = ref('');

        // 笔记库相关
        const summaries = ref([]);
        const libraryLoading = ref(false);

        // 阅读页面相关
        const readingContent = ref('');
        const showToc = ref(true);
        const tocHtml = ref('');
        const currentFilename = ref('');
        
        // 分享相关状态  
        const shareLoading = ref(false);
        
        // Toast 提示相关状态
        const toastMessage = ref('');
        const toastType = ref(''); // success, error, info
        const showToastModal = ref(false);

        // ---------- 认证相关 ----------
        const token = localStorage.getItem('authToken') || '';
        const isAuthenticated = ref(!!token);
        if (token) {
          axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;
        }

        const showLogin = ref(false);
        const loginUsername = ref('');
        const loginPassword = ref('');

        // 计算属性
        const rendered = computed(() => marked.parse(summary.value));
        const progressPercent = computed(() => {
          return ((currentStep.value) / totalSteps) * 100;
        });

        // 工具函数
        const formatDate = (timestamp) => {
          return new Date(timestamp * 1000).toLocaleDateString('zh-CN', {
            year: 'numeric',
            month: 'short',
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit'
          });
        };

        const formatSize = (bytes) => {
          if (bytes === 0) return '0 B';
          const k = 1024;
          const sizes = ['B', 'KB', 'MB', 'GB'];
          const i = Math.floor(Math.log(bytes) / Math.log(k));
          return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
        };

        // 格式化字数显示
        const formatWordCount = (bytes) => {
          // 估算中文字符数（假设平均每个中文字符占用3个字节）
          const estimatedChars = Math.round(bytes / 3);
          if (estimatedChars < 1000) {
            return `${estimatedChars}字`;
          } else if (estimatedChars < 10000) {
            return `${(estimatedChars / 1000).toFixed(1)}k字`;
          } else {
            return `${(estimatedChars / 10000).toFixed(1)}万字`;
          }
        };

        // 计算阅读时间（按照每分钟300字的阅读速度）
        const calculateReadTime = (bytes) => {
          const estimatedChars = Math.round(bytes / 3);
          const readingSpeed = 300; // 每分钟300字
          const minutes = Math.ceil(estimatedChars / readingSpeed);
          if (minutes < 60) {
            return `${minutes}分钟`;
          } else {
            const hours = Math.floor(minutes / 60);
            const remainingMinutes = minutes % 60;
            return remainingMinutes > 0 ? `${hours}小时${remainingMinutes}分钟` : `${hours}小时`;
          }
        };

        // ---------- 新增: 渲染 Markdown 并生成目录 ----------
        const slugify = (str) => {
          return str.toLowerCase()
            .replace(/[^\w\u4e00-\u9fa5\s-]/g, '')
            .replace(/\s+/g, '-')
            .replace(/-+/g, '-')
            .replace(/^-|-$/g, '');
        };

        const renderMarkdownWithToc = (markdown) => {
          // 使用 marked 渲染 Markdown -> HTML
          const rawHtml = marked.parse(markdown);

          // 使用 DOMParser 解析 HTML
          const parser = new DOMParser();
          const doc = parser.parseFromString(rawHtml, 'text/html');

          // 收集所有标题
          const headings = [...doc.body.querySelectorAll('h1,h2,h3,h4,h5,h6')];

          let tocHtml = '<ul>';

          headings.forEach(h => {
            const text = h.textContent.replace(/\s*\(#.+\)$/g, '').trim();
            const id = slugify(text);
            // 给所有标题添加 id
            h.id = id;

            // 只为h3构建目录，作为章节的第一级
            if (h.tagName.toLowerCase() === 'h3') {
              tocHtml += `<li><a data-target="${id}">${text}</a></li>`;
            }
          });
          tocHtml += '</ul>';

          return { html: doc.body.innerHTML, tocHtml };
        };

        // ---------- 修改: loadSummary ----------
        const loadSummary = async (filename) => {
          try {
            // 对文件名进行URL编码以处理特殊字符（如#）
            const encodedFilename = encodeURIComponent(filename);
            const res = await axios.get(`/summaries/${encodedFilename}`);
            const { html, tocHtml: tocString } = renderMarkdownWithToc(res.data.content);
            readingContent.value = html;
            tocHtml.value = tocString;
            currentFilename.value = filename;
            currentView.value = 'read';
          } catch (e) {
            console.error('加载摘要失败:', e);
          }
        };

        // ---------- 修改: viewSummary ----------
        const viewSummary = (summaryTitle, summaryContent) => {
          const { html, tocHtml: tocString } = renderMarkdownWithToc(summaryContent);
          readingContent.value = html;
          tocHtml.value = tocString;
          // 从标题推断文件名
          currentFilename.value = summaryTitle + ".md";
          currentView.value = 'read';
        };

        // WebSocket 连接
        const connectWebSocket = (taskId) => {
          const wsProtocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';
          const wsUrl = `${wsProtocol}//${window.location.host}/ws/${taskId}`;
          const ws = new WebSocket(wsUrl);

          ws.onmessage = (event) => {
            const data = JSON.parse(event.data);
            if (data.type === 'result') {
              summary.value = data.summary;
              title.value = data.title;
              loading.value = false;
              currentStep.value = totalSteps; // 完成
              // 刷新笔记库
              loadSummaries();
            } else if (data.message) {
              // 根据关键字映射简洁步骤并更新进度
              const msg = data.message;
              if (msg.includes('下载字幕')) {
                currentStep.value = 1;
                logs.value = ['下载字幕中...'];
              } else if (msg.includes('成功下载')) {
                currentStep.value = 2;
                logs.value = ['字幕下载完成'];
              } else if (msg.includes('调用')) {
                currentStep.value = 3;
                logs.value = ['生成摘要中...'];
              } else if (msg.includes('摘要已保存')) {
                currentStep.value = 4;
                logs.value = ['摘要已保存'];
              } else if (msg.includes('摘要完成')) {
                currentStep.value = totalSteps;
                logs.value = ['完成'];
              } else if (msg.startsWith('错误')) {
                logs.value.push(msg);
              }
            }
          };

          ws.onerror = (event) => {
            logs.value.push("WebSocket 连接错误。");
            loading.value = false;
          };

          ws.onclose = (event) => {
            logs.value.push("连接已关闭。");
            if (!summary.value) {
              loading.value = false;
            }
          };
        };

        // API 调用
        const isValidYoutubeUrl = (u) => {
          // 支持各种 YouTube 链接格式的增强验证
          if (!u || typeof u !== 'string') return false;
          
          const url = u.trim();
          
          // 支持的 YouTube 格式：
          // 1. 标准格式：https://www.youtube.com/watch?v=VIDEO_ID
          // 2. 短链接：https://youtu.be/VIDEO_ID
          // 3. 移动端：https://m.youtube.com/watch?v=VIDEO_ID
          // 4. 嵌入格式：https://www.youtube.com/embed/VIDEO_ID
          // 5. 播放列表中的视频：https://www.youtube.com/watch?v=VIDEO_ID&list=...
          // 6. 时间戳链接：https://youtu.be/VIDEO_ID?t=123s
          // 7. 无协议格式：www.youtube.com/watch?v=VIDEO_ID
          
          const patterns = [
            // 标准 YouTube 格式
            /^(https?:\/\/)?(www\.)?youtube\.com\/watch\?v=[\w-]{11}(&.*)?$/,
            // 短链接格式
            /^(https?:\/\/)?youtu\.be\/[\w-]{11}(\?.*)?$/,
            // 移动端格式
            /^(https?:\/\/)?(m\.)?youtube\.com\/watch\?v=[\w-]{11}(&.*)?$/,
            // 嵌入格式
            /^(https?:\/\/)?(www\.)?youtube\.com\/embed\/[\w-]{11}(\?.*)?$/,
            // YouTube Music 格式
            /^(https?:\/\/)?music\.youtube\.com\/watch\?v=[\w-]{11}(&.*)?$/,
            // 频道页面中的视频
            /^(https?:\/\/)?(www\.)?youtube\.com\/.*[&?]v=[\w-]{11}(&.*)?$/
          ];
          
          return patterns.some(pattern => pattern.test(url));
        };

        // 标准化 YouTube URL 为统一格式
        const normalizeYoutubeUrl = (url) => {
          if (!url) return '';
          
          const videoIdMatch = url.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/|youtube\.com\/.*[&?]v=)([^"&?\/\s]{11})/);
          
          if (videoIdMatch && videoIdMatch[1]) {
            return `https://www.youtube.com/watch?v=${videoIdMatch[1]}`;
          }
          
          return url;
        };

        // ========== 新增：视频分类功能 ==========
        const categorizedSummaries = computed(() => {
          if (!summaries.value || summaries.value.length === 0) {
            return { reinvent: [], other: [] };
          }
          
          const reinvent = [];
          const other = [];
          
          summaries.value.forEach(summary => {
            // 检查文件名或标题是否包含 reInvent（不区分大小写）
            const isReinvent = 
              /reinvent/i.test(summary.filename) || 
              /reinvent/i.test(summary.title_cn || '') || 
              /reinvent/i.test(summary.title_en || '') ||
              /aws\s+re:?invent/i.test(summary.filename) ||
              /aws\s+re:?invent/i.test(summary.title_cn || '') ||
              /aws\s+re:?invent/i.test(summary.title_en || '');
            
            if (isReinvent) {
              reinvent.push(summary);
            } else {
              other.push(summary);
            }
          });
          
          // 按修改时间倒序排列
          reinvent.sort((a, b) => b.mtime - a.mtime);
          other.sort((a, b) => b.mtime - a.mtime);
          
          return { reinvent, other };
        });

        const startSummarize = async () => {
          if (!isAuthenticated.value) {
            showLogin.value = true;
            return;
          }
          
          if (!isValidYoutubeUrl(url.value)) {
            showToast('请输入有效的 YouTube 视频链接', 'error');
            return;
          }
          
          logs.value = [];
          summary.value = '';
          title.value = '';
          loading.value = true;
          
          try {
            // 标准化 URL
            const normalizedUrl = normalizeYoutubeUrl(url.value);
            const res = await axios.post('/summarize', { url: normalizedUrl });
            const taskId = res.data.task_id;
            logs.value.push("任务已创建，正在连接实时日志...");
            connectWebSocket(taskId);
          } catch (e) {
            const errorMsg = e.response?.data?.detail || '创建任务失败';
            logs.value.push(`错误: ${errorMsg}`);
            loading.value = false;
          }
        };

        const loadSummaries = async () => {
          libraryLoading.value = true;
          try {
            const res = await axios.get('/summaries');
            summaries.value = res.data.summaries;
          } catch (e) {
            console.error('加载摘要列表失败:', e);
          } finally {
            libraryLoading.value = false;
          }
        };

        const toggleToc = () => {
          showToc.value = !showToc.value;
        };

        // 分享功能 - 优化版
        const shareDocument = async () => {
          if (!currentFilename.value) {
            showToast('请先选择要分享的文档', 'error');
            return;
          }
          
          if (shareLoading.value) return;
          
          try {
            shareLoading.value = true;
            // 对文件名进行URL编码以处理特殊字符（如#）
            const encodedFilename = encodeURIComponent(currentFilename.value);
            const res = await axios.post(`/share/${encodedFilename}`);
            const fullUrl = `${window.location.origin}/share/${res.data.share_token}`;
            
            // 复制到剪贴板
            try {
              await copyToClipboard(fullUrl);
              showToast('分享链接已复制到剪贴板！', 'success');
            } catch (copyError) {
              // 如果复制失败，降级处理已在 copyToClipboard 函数中处理
              showToast('分享链接生成成功，请手动复制', 'warning');
            }
          } catch (e) {
            console.error('创建分享链接失败:', e);
            const errorMsg = e.response?.data?.detail || e.message || '创建分享链接失败';
            showToast(`分享失败: ${errorMsg}`, 'error');
          } finally {
            shareLoading.value = false;
          }
        };

        // 复制到剪贴板的通用函数
        const copyToClipboard = async (text) => {
          try {
            // 优先使用现代 Clipboard API
            if (navigator.clipboard && window.isSecureContext) {
              await navigator.clipboard.writeText(text);
              return;
            }
            
            // 降级处理：使用传统方法
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
              const successful = document.execCommand('copy');
              if (!successful) {
                throw new Error('复制命令执行失败');
              }
            } finally {
              document.body.removeChild(textArea);
            }
          } catch (e) {
            console.error('复制到剪贴板失败:', e);
            // 如果都失败了，至少给用户一个手动复制的选项
            const fallbackModal = document.createElement('div');
            fallbackModal.style.cssText = `
              position: fixed;
              top: 50%;
              left: 50%;
              transform: translate(-50%, -50%);
              background: #1f2937;
              border: 1px solid #374151;
              border-radius: 8px;
              padding: 20px;
              z-index: 9999;
              max-width: 90%;
              box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            `;
            fallbackModal.innerHTML = `
              <h3 style="color: #06b6d4; margin-bottom: 10px;">请手动复制链接</h3>
              <input type="text" value="${text}" style="width: 100%; padding: 8px; margin-bottom: 10px; background: #374151; border: 1px solid #4b5563; border-radius: 4px; color: white;" readonly>
              <button onclick="this.parentElement.remove()" style="background: #06b6d4; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer;">关闭</button>
            `;
            document.body.appendChild(fallbackModal);
            
            // 选中文本
            const input = fallbackModal.querySelector('input');
            input.focus();
            input.select();
            
            // 5秒后自动关闭
            setTimeout(() => {
              if (fallbackModal.parentElement) {
                fallbackModal.remove();
              }
            }, 5000);
            
            throw e;
          }
        };

        // Toast 提示功能
        const showToast = (message, type = 'info') => {
          toastMessage.value = message;
          toastType.value = type;
          showToastModal.value = true;
          
          // 3秒后自动隐藏
          setTimeout(() => {
            showToastModal.value = false;
          }, 3000);
        };

        // 处理目录点击
        const handleTocClick = (event) => {
          const target = event.target;
          if (target.tagName.toLowerCase() === 'a' && target.dataset.target) {
            event.preventDefault();
            const id = target.dataset.target;
            const el = document.getElementById(id);
            if (el) {
              el.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
          }
        };

        // 拖拽侧栏分隔条
        const tocWidth = ref(Math.round(window.innerWidth / 3.55));

        // 移动端默认隐藏目录
        if (window.innerWidth < 768) {
          showToc.value = false;
        }

        const initDrag = (e) => {
          e.preventDefault();
          const startX = e.clientX;
          const startW = tocWidth.value;

          const onMove = (ev) => {
            const newW = Math.max(280, startW + (ev.clientX - startX));
            tocWidth.value = newW;
          };

          const onUp = () => {
            window.removeEventListener('mousemove', onMove);
            window.removeEventListener('mouseup', onUp);
          };

          window.addEventListener('mousemove', onMove);
          window.addEventListener('mouseup', onUp);
        };

        // 登录处理
        const submitLogin = async () => {
          try {
            const res = await axios.post('/login', { username: loginUsername.value, password: loginPassword.value });
            const tk = res.data.token;
            axios.defaults.headers.common['Authorization'] = `Bearer ${tk}`;
            localStorage.setItem('authToken', tk);
            isAuthenticated.value = true;
            showLogin.value = false;
            showToast('登录成功', 'success');
          } catch (e) {
            showToast('登录失败: 用户名或密码错误', 'error');
          }
        };

        const logout = () => {
          localStorage.removeItem('authToken');
          delete axios.defaults.headers.common['Authorization'];
          isAuthenticated.value = false;
          currentView.value = 'library';
        };

        // 生命周期
        onMounted(() => {
          loadSummaries();
        });

        return {
          currentView,
          url,
          loading,
          logs,
          summary,
          title,
          rendered,
          summaries,
          libraryLoading,
          readingContent,
          showToc,
          tocHtml,
          currentFilename,
          shareLoading,
          toastMessage,
          toastType,
          showToastModal,
          formatDate,
          formatSize,
          formatWordCount,
          calculateReadTime,
          startSummarize,
          loadSummaries,
          loadSummary,
          viewSummary,
          toggleToc,
          shareDocument,
          showToast,
          handleTocClick,
          tocWidth,
          initDrag,
          progressPercent,
          currentStep,
          totalSteps,
          isAuthenticated,
          showLogin,
          loginUsername,
          loginPassword,
          submitLogin,
          logout,
          isValidYoutubeUrl,
          categorizedSummaries,
          normalizeYoutubeUrl
        };
      },
    }).mount('#app');
  </script>
</body>

</html> 