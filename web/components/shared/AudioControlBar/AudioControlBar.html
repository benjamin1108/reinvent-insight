<div class="audio-player" v-if="articleText">
    <!-- ÈîôËØØÊèêÁ§∫ - È°∂ÈÉ®ÂºπÂá∫ -->
    <div v-if="error" class="audio-player__toast">
        <span class="audio-player__toast-icon">‚ö†Ô∏è</span>
        <span class="audio-player__toast-message">{{ error }}</span>
        <button class="audio-player__toast-close" @click="error = null" aria-label="ÂÖ≥Èó≠">‚úï</button>
    </div>

    <!-- ‰∏ªÊí≠ÊîæÂô®Êù° -->
    <div class="audio-player__bar">
        <!-- Â∑¶‰æß: Êí≠ÊîæÊåâÈíÆ -->
        <button class="audio-player__play-btn" @click="togglePlayPause" :disabled="isLoading"
            :title="playButtonTooltip" :aria-label="playButtonTooltip">
            <span class="audio-player__play-icon">{{ playButtonIcon }}</span>
        </button>

        <!-- ‰∏≠Èó¥: ËøõÂ∫¶Âå∫Âüü -->
        <div class="audio-player__progress-section">
            <!-- ËøõÂ∫¶Êù° -->
            <div class="audio-player__progress-bar" @click="seek" role="slider" :aria-valuenow="currentTime"
                :aria-valuemin="0" :aria-valuemax="duration" aria-label="Êí≠ÊîæËøõÂ∫¶">
                <!-- ÁºìÂÜ≤ËøõÂ∫¶ -->
                <div class="audio-player__progress-buffered" :style="{ width: bufferedPercentage + '%' }"></div>

                <!-- ÂΩìÂâçËøõÂ∫¶ -->
                <div class="audio-player__progress-current" :style="{ width: progressPercentage + '%' }"></div>

                <!-- ÊªëÂùó -->
                <div class="audio-player__progress-thumb" :style="{ left: progressPercentage + '%' }"
                    v-if="duration > 0"></div>
            </div>

            <!-- Êó∂Èó¥ÊòæÁ§∫ -->
            <div class="audio-player__time">
                <span class="audio-player__time-current">{{ formattedCurrentTime }}</span>
                <span class="audio-player__time-separator">/</span>
                <span class="audio-player__time-total">{{ formattedDuration }}</span>
            </div>
        </div>

        <!-- Âè≥‰æß: ÊéßÂà∂ÊåâÈíÆ -->
        <div class="audio-player__controls">
            <!-- ÈÄüÂ∫¶ÈÄâÊã© -->
            <div class="audio-player__speed">
                <label for="speed-select" class="audio-player__speed-label">‚ö°</label>
                <select id="speed-select" class="audio-player__speed-select" v-model.number="playbackRate"
                    @change="setPlaybackRate" aria-label="Êí≠ÊîæÈÄüÂ∫¶">
                    <option v-for="rate in playbackRates" :key="rate.value" :value="rate.value">{{ rate.label }}
                    </option>
                </select>
            </div>

            <!-- ‰∏ãËΩΩÊåâÈíÆ -->
            <button class="audio-player__download-btn" @click="downloadAudio" :disabled="isDownloading || isLoading"
                title="‰∏ãËΩΩÈü≥È¢ë" aria-label="‰∏ãËΩΩÈü≥È¢ëÊñá‰ª∂">
                <span v-if="!isDownloading">üì•</span>
                <span v-else class="audio-player__download-loading">‚è≥</span>
            </button>
        </div>
    </div>
</div>