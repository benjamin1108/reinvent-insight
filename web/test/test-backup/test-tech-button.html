<!DOCTYPE html>
<html lang="zh-CN" class="h-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TechButton组件测试 - reinvent Insight</title>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&display=swap" rel="stylesheet" />
  <script src="/js/vendor/vue.global.prod.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- 核心脚本 -->
  <script src="/js/core/component-loader.js"></script>
  <style>
    body {
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
      background-attachment: fixed;
      min-height: 100vh;
      color: #e5e7eb;
    }
    
    .demo-section {
      background: rgba(17, 24, 39, 0.8);
      border: 1px solid #374151;
      border-radius: 12px;
      padding: 2rem;
      margin: 2rem;
      backdrop-filter: blur(10px);
    }
    
    .demo-grid {
      display: grid;
      gap: 1rem;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      margin-top: 1rem;
    }
    
    .demo-row {
      display: flex;
      gap: 1rem;
      margin: 1rem 0;
      flex-wrap: wrap;
      align-items: center;
    }
    
    .section-title {
      color: #06b6d4;
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 1rem;
    }
    
    .subsection-title {
      color: #a855f7;
      font-size: 1.2rem;
      font-weight: 500;
      margin: 1.5rem 0 1rem 0;
    }
    
    .description {
      color: #9ca3af;
      margin-bottom: 1rem;
      font-size: 0.9rem;
    }
    
    .control-panel {
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid #1f2937;
      border-radius: 8px;
      padding: 1rem;
      margin: 1rem 0;
    }
    
    .control-item {
      margin: 0.5rem 0;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .control-label {
      color: #d1d5db;
      font-size: 0.875rem;
      min-width: 80px;
    }
    
    .control-input {
      background: rgba(17, 24, 39, 0.8);
      border: 1px solid #4b5563;
      border-radius: 4px;
      color: white;
      padding: 0.25rem 0.5rem;
      font-size: 0.8rem;
    }
    
    .event-log {
      background: rgba(0, 0, 0, 0.4);
      border: 1px solid #1f2937;
      border-radius: 8px;
      padding: 1rem;
      margin-top: 1rem;
      max-height: 200px;
      overflow-y: auto;
      font-family: monospace;
      font-size: 0.8rem;
    }
    
    .log-item {
      color: #34d399;
      margin-bottom: 0.25rem;
    }
  </style>
</head>

<body class="h-full bg-gray-900 text-gray-200">
  <div id="app" class="min-h-full">
    <div class="container mx-auto py-8">
      <h1 class="text-3xl font-bold text-center mb-8 text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500">
        TechButton 组件测试
      </h1>
      
      <!-- 基础变体 -->
      <div class="demo-section">
        <h2 class="section-title">按钮变体 (Variants)</h2>
        <p class="description">展示所有按钮变体的样式和悬停效果</p>
        
        <div class="demo-row">
          <tech-button variant="primary" @click="handleClick('Primary')">Primary</tech-button>
          <tech-button variant="secondary" @click="handleClick('Secondary')">Secondary</tech-button>
          <tech-button variant="success" @click="handleClick('Success')">Success</tech-button>
          <tech-button variant="warning" @click="handleClick('Warning')">Warning</tech-button>
          <tech-button variant="danger" @click="handleClick('Danger')">Danger</tech-button>
        </div>
      </div>

      <!-- 按钮尺寸 -->
      <div class="demo-section">
        <h2 class="section-title">按钮尺寸 (Sizes)</h2>
        <p class="description">不同尺寸的按钮展示</p>
        
        <h3 class="subsection-title">Small 按钮</h3>
        <div class="demo-row">
          <tech-button size="sm" variant="primary" @click="handleClick('Small Primary')">Small</tech-button>
          <tech-button size="sm" variant="secondary" @click="handleClick('Small Secondary')">Small</tech-button>
          <tech-button size="sm" variant="danger" @click="handleClick('Small Danger')">Small</tech-button>
        </div>
        
        <h3 class="subsection-title">Normal 按钮</h3>
        <div class="demo-row">
          <tech-button variant="primary" @click="handleClick('Normal Primary')">Normal</tech-button>
          <tech-button variant="secondary" @click="handleClick('Normal Secondary')">Normal</tech-button>
          <tech-button variant="danger" @click="handleClick('Normal Danger')">Normal</tech-button>
        </div>
        
        <h3 class="subsection-title">Large 按钮</h3>
        <div class="demo-row">
          <tech-button size="lg" variant="primary" @click="handleClick('Large Primary')">Large</tech-button>
          <tech-button size="lg" variant="secondary" @click="handleClick('Large Secondary')">Large</tech-button>
          <tech-button size="lg" variant="danger" @click="handleClick('Large Danger')">Large</tech-button>
        </div>
      </div>

      <!-- 图标按钮 -->
      <div class="demo-section">
        <h2 class="section-title">图标按钮</h2>
        <p class="description">带图标的按钮和图标专用按钮</p>
        
        <h3 class="subsection-title">带前置图标</h3>
        <div class="demo-row">
          <tech-button variant="primary" 
                       :icon-before="icons.plus" 
                       @click="handleClick('Add Item')">
            添加项目
          </tech-button>
          <tech-button variant="secondary" 
                       :icon-before="icons.edit" 
                       @click="handleClick('Edit')">
            编辑
          </tech-button>
          <tech-button variant="danger" 
                       :icon-before="icons.trash" 
                       @click="handleClick('Delete')">
            删除
          </tech-button>
        </div>
        
        <h3 class="subsection-title">带后置图标</h3>
        <div class="demo-row">
          <tech-button variant="primary" 
                       :icon-after="icons.arrowRight" 
                       @click="handleClick('Next')">
            下一步
          </tech-button>
          <tech-button variant="secondary" 
                       :icon-after="icons.externalLink" 
                       @click="handleClick('Open Link')">
            打开链接
          </tech-button>
        </div>
        
        <h3 class="subsection-title">图标专用按钮</h3>
        <div class="demo-row">
          <tech-button variant="primary" 
                       :icon-before="icons.plus" 
                       icon-only 
                       title="添加"
                       @click="handleClick('Icon Add')">
          </tech-button>
          <tech-button variant="secondary" 
                       :icon-before="icons.edit" 
                       icon-only 
                       title="编辑"
                       @click="handleClick('Icon Edit')">
          </tech-button>
          <tech-button variant="danger" 
                       :icon-before="icons.trash" 
                       icon-only 
                       title="删除"
                       @click="handleClick('Icon Delete')">
          </tech-button>
          <tech-button variant="success" 
                       :icon-before="icons.check" 
                       icon-only 
                       title="确认"
                       size="sm"
                       @click="handleClick('Icon Check Small')">
          </tech-button>
          <tech-button variant="warning" 
                       :icon-before="icons.warning" 
                       icon-only 
                       title="警告"
                       size="lg"
                       @click="handleClick('Icon Warning Large')">
          </tech-button>
        </div>
      </div>

      <!-- 状态按钮 -->
      <div class="demo-section">
        <h2 class="section-title">按钮状态</h2>
        <p class="description">加载状态、禁用状态和交互状态</p>
        
        <h3 class="subsection-title">加载状态</h3>
        <div class="demo-row">
          <tech-button variant="primary" 
                       :loading="loadingStates.primary"
                       loading-text="处理中..."
                       @click="simulateLoading('primary')">
            {{ loadingStates.primary ? '处理中...' : '开始处理' }}
          </tech-button>
          <tech-button variant="secondary" 
                       :loading="loadingStates.secondary"
                       loading-text="保存中..."
                       @click="simulateLoading('secondary')">
            {{ loadingStates.secondary ? '保存中...' : '保存' }}
          </tech-button>
          <tech-button variant="danger" 
                       :loading="loadingStates.danger"
                       loading-text="删除中..."
                       @click="simulateLoading('danger')">
            {{ loadingStates.danger ? '删除中...' : '删除' }}
          </tech-button>
        </div>
        
        <h3 class="subsection-title">禁用状态</h3>
        <div class="demo-row">
          <tech-button variant="primary" disabled>已禁用</tech-button>
          <tech-button variant="secondary" disabled>已禁用</tech-button>
          <tech-button variant="danger" disabled>已禁用</tech-button>
          <tech-button variant="success" disabled :icon-before="icons.check">已禁用带图标</tech-button>
        </div>
      </div>

      <!-- 特殊按钮 -->
      <div class="demo-section">
        <h2 class="section-title">特殊按钮</h2>
        <p class="description">全宽按钮和自定义最小宽度</p>
        
        <h3 class="subsection-title">全宽按钮</h3>
        <div style="max-width: 400px;">
          <tech-button variant="primary" full-width @click="handleClick('Full Width Primary')">
            全宽主要按钮
          </tech-button>
          <tech-button variant="secondary" 
                       full-width 
                       :icon-before="icons.download" 
                       style="margin-top: 0.5rem;"
                       @click="handleClick('Full Width Download')">
            下载文件
          </tech-button>
        </div>
        
        <h3 class="subsection-title">自定义最小宽度</h3>
        <div class="demo-row">
          <tech-button variant="primary" min-width="200px" @click="handleClick('Wide Button')">
            较宽按钮
          </tech-button>
          <tech-button variant="secondary" min-width="80px" @click="handleClick('Narrow')">
            窄
          </tech-button>
        </div>
      </div>

      <!-- 交互控制 -->
      <div class="demo-section">
        <h2 class="section-title">交互测试</h2>
        <p class="description">动态控制按钮属性和状态</p>
        
        <div class="control-panel">
          <div class="control-item">
            <label class="control-label">变体:</label>
            <select v-model="testButtonVariant" class="control-input">
              <option value="primary">Primary</option>
              <option value="secondary">Secondary</option>
              <option value="success">Success</option>
              <option value="warning">Warning</option>
              <option value="danger">Danger</option>
            </select>
          </div>
          <div class="control-item">
            <label class="control-label">尺寸:</label>
            <select v-model="testButtonSize" class="control-input">
              <option value="sm">Small</option>
              <option value="normal">Normal</option>
              <option value="lg">Large</option>
            </select>
          </div>
          <div class="control-item">
            <label class="control-label">文字:</label>
            <input v-model="testButtonText" class="control-input" placeholder="按钮文字">
          </div>
          <div class="control-item">
            <label class="control-label">禁用:</label>
            <input type="checkbox" v-model="testButtonDisabled">
          </div>
          <div class="control-item">
            <label class="control-label">加载:</label>
            <input type="checkbox" v-model="testButtonLoading">
          </div>
          <div class="control-item">
            <label class="control-label">图标:</label>
            <select v-model="testButtonIcon" class="control-input">
              <option value="">无图标</option>
              <option value="plus">加号</option>
              <option value="edit">编辑</option>
              <option value="trash">删除</option>
              <option value="check">确认</option>
              <option value="warning">警告</option>
            </select>
          </div>
        </div>
        
        <div class="demo-row">
          <tech-button 
            :variant="testButtonVariant"
            :size="testButtonSize"
            :text="testButtonText"
            :disabled="testButtonDisabled"
            :loading="testButtonLoading"
            :icon-before="testButtonIcon ? icons[testButtonIcon] : ''"
            @click="handleClick('Test Button')">
          </tech-button>
        </div>
        
        <!-- 事件日志 -->
        <div class="event-log">
          <h3 class="text-lg font-semibold mb-2 text-cyan-400">事件日志</h3>
          <div v-for="(log, index) in eventLogs" :key="index" class="log-item">
            [{{ log.time }}] {{ log.message }}
          </div>
          <div v-if="eventLogs.length === 0" class="text-gray-500">
            点击按钮查看事件日志
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="module">
    const { createApp, ref, reactive, getCurrentInstance, onMounted } = Vue;
    
    const app = createApp({
      setup() {
        // 图标定义
        const icons = {
          plus: 'M12 6v6m0 0v6m0-6h6m-6 0H6',
          edit: 'M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z',
          trash: 'M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16',
          check: 'M5 13l4 4L19 7',
          warning: 'M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.728-.833-2.464 0L4.34 16.5c-.77.833.192 2.5 1.732 2.5z',
          arrowRight: 'M14 5l7 7m0 0l-7 7m7-7H3',
          externalLink: 'M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14',
          download: 'M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z'
        };
        
        // 状态管理
        const loadingStates = reactive({
          primary: false,
          secondary: false,
          danger: false
        });
        
        const testButtonVariant = ref('primary');
        const testButtonSize = ref('normal');
        const testButtonText = ref('测试按钮');
        const testButtonDisabled = ref(false);
        const testButtonLoading = ref(false);
        const testButtonIcon = ref('');
        
        const eventLogs = ref([]);
        
        // 方法
        const addLog = (message) => {
          eventLogs.value.push({
            time: new Date().toLocaleTimeString(),
            message
          });
          
          // 限制日志数量
          if (eventLogs.value.length > 50) {
            eventLogs.value = eventLogs.value.slice(-50);
          }
        };
        
        const handleClick = (buttonName) => {
          addLog(`点击了按钮: ${buttonName}`);
        };
        
        const simulateLoading = (type) => {
          loadingStates[type] = true;
          addLog(`开始加载: ${type}`);
          
          setTimeout(() => {
            loadingStates[type] = false;
            addLog(`加载完成: ${type}`);
          }, 2000);
        };
        
        // 组件加载
        onMounted(async () => {
          try {
            const app = getCurrentInstance().appContext.app;
            
            await ComponentLoader.registerComponents(app, [
              ['tech-button', '/components/shared/TechButton', 'TechButton']
            ]);
            
            console.log('TechButton 组件加载成功');
            addLog('TechButton 组件加载完成');
          } catch (error) {
            console.error('加载组件失败:', error);
            addLog(`组件加载失败: ${error.message}`);
          }
        });
        
        return {
          icons,
          loadingStates,
          testButtonVariant,
          testButtonSize,
          testButtonText,
          testButtonDisabled,
          testButtonLoading,
          testButtonIcon,
          eventLogs,
          handleClick,
          simulateLoading
        };
      }
    });
    
    app.mount('#app');
  </script>
</body>
</html> 