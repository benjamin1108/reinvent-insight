<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quick-Insight åŠŸèƒ½æµ‹è¯•</title>
  
  <!-- å­—ä½“ -->
  <link rel="preconnect" href="https://fonts.loli.net" crossorigin>
  <link href="https://fonts.loli.net/css2?family=Inter:wght@300;400;500;600;700;800&family=Outfit:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  
  <!-- Vue 3 å’Œä¾èµ– -->
  <script src="/js/vendor/vue.global.prod.min.js"></script>
  <script src="/js/vendor/axios.min.js"></script>
  <script src="/js/vendor/marked.min.js"></script>
  
  <!-- æ ·å¼ -->
  <link rel="stylesheet" href="/css/base/effects.css">
  <link rel="stylesheet" href="/css/app.css">
  
  <!-- ç»„ä»¶æ ¸å¿ƒ -->
  <script src="/js/core/event-bus.js"></script>
  <script src="/js/core/component-loader.js"></script>
  <script src="/js/composables/useToast.js" type="module"></script>
  
  <style>
    body {
      background: #111827;
      color: #e5e7eb;
      font-family: 'Inter', sans-serif;
      margin: 0;
      padding: 0;
      min-height: 100vh;
    }
    
    .test-container {
      padding: 2rem;
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .test-header {
      margin-bottom: 2rem;
      text-align: center;
    }
    
    .test-header h1 {
      font-size: 2rem;
      font-weight: 700;
      background: linear-gradient(135deg, #22d3ee, #3b82f6);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      margin-bottom: 1rem;
    }
    
    .test-controls {
      display: flex;
      gap: 1rem;
      margin-bottom: 2rem;
      justify-content: center;
    }
    
    .test-btn {
      padding: 0.75rem 1.5rem;
      background: linear-gradient(135deg, #22d3ee, #3b82f6);
      color: white;
      border: none;
      border-radius: 0.5rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .test-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(34, 211, 238, 0.3);
    }
    
    .test-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .test-info {
      background: rgba(15, 23, 42, 0.8);
      border: 1px solid #374151;
      border-radius: 0.75rem;
      padding: 1.5rem;
      margin-bottom: 2rem;
    }
    
    .test-info h3 {
      color: #22d3ee;
      margin-bottom: 1rem;
      font-size: 1.25rem;
    }
    
    .test-info p {
      line-height: 1.6;
      margin-bottom: 0.5rem;
    }
    
    .reading-container {
      height: 80vh;
      border: 1px solid #374151;
      border-radius: 0.75rem;
      overflow: auto;
      background: #111827;
    }
    
    /* æ»šåŠ¨æ¡æ ·å¼ */
    .reading-container::-webkit-scrollbar {
      width: 8px;
    }
    
    .reading-container::-webkit-scrollbar-track {
      background: rgba(55, 65, 81, 0.3);
      border-radius: 4px;
    }
    
    .reading-container::-webkit-scrollbar-thumb {
      background: linear-gradient(135deg, #22d3ee, #3b82f6);
      border-radius: 4px;
    }
    
    .reading-container::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(135deg, #0891b2, #2563eb);
    }
    
    .status-info {
      display: flex;
      gap: 1rem;
      margin-bottom: 1rem;
      justify-content: center;
    }
    
    .status-badge {
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      font-size: 0.875rem;
      font-weight: 500;
    }
    
    .status-badge.available {
      background: rgba(34, 197, 94, 0.2);
      color: #22c55e;
      border: 1px solid rgba(34, 197, 94, 0.3);
    }
    
    .status-badge.unavailable {
      background: rgba(239, 68, 68, 0.2);
      color: #ef4444;
      border: 1px solid rgba(239, 68, 68, 0.3);
    }
    
    .status-badge.loading {
      background: rgba(34, 211, 238, 0.2);
      color: #22d3ee;
      border: 1px solid rgba(34, 211, 238, 0.3);
    }
  </style>
</head>
<body>
  <div id="app" v-cloak>
    <div class="test-container">
      <div class="test-header">
        <h1>ğŸš€ Quick-Insight åŠŸèƒ½æµ‹è¯•</h1>
        <p>æµ‹è¯•Deep-Insight vs Quick-Insightæ¨¡å¼åˆ‡æ¢åŠŸèƒ½</p>
      </div>
      
      <div class="test-info">
        <h3>ğŸ“– æµ‹è¯•è¯´æ˜</h3>
        <p>â€¢ æœ¬é¡µé¢ç”¨äºæµ‹è¯•Quick-InsightåŠŸèƒ½çš„å‰ç«¯UIå’ŒAPIé›†æˆ</p>
        <p>â€¢ ä½¿ç”¨ä¸¤ä¸ªæµ‹è¯•æ–‡ç« Hashï¼šYuval Noah Harariæ–‡ç« å’ŒAWS reInventæ–‡ç« </p>
        <p>â€¢ æµ‹è¯•æ¨¡å¼åˆ‡æ¢ã€åŠ è½½çŠ¶æ€ã€é”™è¯¯å¤„ç†ç­‰åŠŸèƒ½</p>
        <p>â€¢ éªŒè¯ç§»åŠ¨ç«¯å“åº”å¼è®¾è®¡å’Œç”¨æˆ·ä½“éªŒ</p>
      </div>
      
      <div class="test-controls">
        <button class="test-btn" @click="loadHarariArticle" :disabled="loading">
          åŠ è½½ Harari æ–‡ç« 
        </button>
        <button class="test-btn" @click="loadReInventArticle" :disabled="loading">
          åŠ è½½ reInvent æ–‡ç« 
        </button>
        <button class="test-btn" @click="loadEmptyArticle" :disabled="loading">
          åŠ è½½ç©ºæ–‡ç« ï¼ˆæµ‹è¯•æ— Quick-Insightï¼‰
        </button>
      </div>
      
      <div class="status-info">
        <div class="status-badge" :class="getStatusClass()">
          {{ getStatusText() }}
        </div>
        <div v-if="currentHash" class="status-badge available">
          Hash: {{ currentHash }}
        </div>
      </div>
      
      <div class="reading-container">
        <reading-view
          :content="content"
          :document-title="documentTitle"
          :document-title-en="documentTitleEn"
          :document-hash="currentHash"
          :loading="loading"
          :error="error"
          :versions="versions"
          :current-version="1"
          :initial-show-toc="true"
          :initial-toc-width="300"
          @insight-mode-change="handleInsightModeChange"
          @quick-insight-load="handleQuickInsightLoad"
        />
      </div>
    </div>
    
    <!-- Toastå®¹å™¨ -->
    <toast-container></toast-container>
  </div>

  <script>
    const { createApp, ref, onMounted } = Vue;
    
    // æµ‹è¯•æ•°æ®
    const testArticles = {
      harari: {
        hash: '7b774e79',
        title: 'ã€Šäººç±»ç®€å²ã€‹æ ¸å¿ƒæ´å¯Ÿ',
        titleEn: 'Sapiens: A Brief History of Humankind - Core Insights',
        content: `# äººç±»ç®€å²æ ¸å¿ƒæ´å¯Ÿ

## è®¤çŸ¥é©å‘½

å¤§çº¦7ä¸‡å¹´å‰ï¼Œäººç±»ç»å†äº†è®¤çŸ¥é©å‘½ï¼Œè¿™æ˜¯äººç±»å†å²ä¸Šæœ€é‡è¦çš„è½¬æŠ˜ç‚¹ä¹‹ä¸€ã€‚

### è¯­è¨€çš„åŠ›é‡

äººç±»å‘å±•å‡ºäº†ç‹¬ç‰¹çš„è¯­è¨€èƒ½åŠ›ï¼Œä¸ä»…èƒ½å¤Ÿäº¤æµå…·ä½“äº‹ç‰©ï¼Œæ›´é‡è¦çš„æ˜¯èƒ½å¤Ÿè°ˆè®ºæŠ½è±¡æ¦‚å¿µã€‚

### è™šæ„æ•…äº‹çš„é‡è¦æ€§

äººç±»èƒ½å¤Ÿç›¸ä¿¡å¹¶ä¼ æ’­è™šæ„çš„æ•…äº‹ï¼Œè¿™äº›æ•…äº‹æˆä¸ºäº†å¤§è§„æ¨¡åˆä½œçš„åŸºç¡€ã€‚

## å†œä¸šé©å‘½

å¤§çº¦1.2ä¸‡å¹´å‰ï¼Œäººç±»å¼€å§‹é©¯åŒ–æ¤ç‰©å’ŒåŠ¨ç‰©ï¼Œè¿™æ ‡å¿—ç€å†œä¸šé©å‘½çš„å¼€å§‹ã€‚

### ä»ç‹©çŒé‡‡é›†åˆ°å†œä¸šç¤¾ä¼š

- äººç±»å¼€å§‹å®šå±…ç”Ÿæ´»
- äººå£å¤§å¹…å¢é•¿
- ç¤¾ä¼šå˜å¾—æ›´åŠ å¤æ‚

### å†œä¸šé©å‘½çš„ä»£ä»·

è™½ç„¶å†œä¸šé©å‘½å¸¦æ¥äº†æ–‡æ˜ï¼Œä½†ä¹Ÿè®©äººç±»çš„ç”Ÿæ´»å˜å¾—æ›´åŠ è‰°éš¾ã€‚

## ç§‘å­¦é©å‘½

å¤§çº¦500å¹´å‰ï¼Œç§‘å­¦é©å‘½å¼€å§‹æ”¹å˜äººç±»å¯¹ä¸–ç•Œçš„è®¤çŸ¥ã€‚

### çŸ¥è¯†é©å‘½

äººç±»å¼€å§‹æ‰¿è®¤è‡ªå·±çš„æ— çŸ¥ï¼Œè¿™åè€Œæˆä¸ºäº†è·å¾—æ–°çŸ¥è¯†çš„åŠ¨åŠ›ã€‚

### æŠ€æœ¯è¿›æ­¥

ç§‘å­¦é©å‘½å¸¦æ¥äº†å‰æ‰€æœªæœ‰çš„æŠ€æœ¯è¿›æ­¥ï¼Œæ”¹å˜äº†äººç±»çš„ç”Ÿæ´»æ–¹å¼ã€‚

## æœªæ¥å±•æœ›

äººç±»æ­£ç«™åœ¨æ–°çš„å†å²è½¬æŠ˜ç‚¹ä¸Šï¼Œé¢ä¸´ç€å‰æ‰€æœªæœ‰çš„æŒ‘æˆ˜å’Œæœºé‡ã€‚

### äººå·¥æ™ºèƒ½æ—¶ä»£

äººå·¥æ™ºèƒ½çš„å‘å±•å¯èƒ½ä¼šé‡æ–°å®šä¹‰äººç±»çš„ä»·å€¼å’Œæ„ä¹‰ã€‚

### ç”Ÿç‰©æŠ€æœ¯é©å‘½

åŸºå› å·¥ç¨‹å’Œç”Ÿç‰©æŠ€æœ¯å¯èƒ½ä¼šè®©äººç±»è·å¾—"ç¥"ä¸€èˆ¬çš„èƒ½åŠ›ã€‚

---

*æœ¬æ–‡æ¡£ç”¨äºæµ‹è¯•Quick-InsightåŠŸèƒ½çš„Deep-Insightæ¨¡å¼æ˜¾ç¤ºæ•ˆæœã€‚*`
      },
      reinvent: {
        hash: '3e97e996',
        title: 'AWS re:Invent 2024 æ ¸å¿ƒå‘å¸ƒ',
        titleEn: 'AWS re:Invent 2024 Key Announcements',
        content: `# AWS re:Invent 2024 æ ¸å¿ƒå‘å¸ƒ

## ä¸»è¦äº§å“å‘å¸ƒ

### ç”Ÿæˆå¼AIæœåŠ¡

AWSåœ¨re:Invent 2024ä¸Šå‘å¸ƒäº†å¤šé¡¹ç”Ÿæˆå¼AIæœåŠ¡æ›´æ–°ã€‚

#### Amazon Bedrockå¢å¼º

- æ–°å¢å¤šç§åŸºç¡€æ¨¡å‹æ”¯æŒ
- æ”¹è¿›çš„å¾®è°ƒåŠŸèƒ½
- æ›´å¥½çš„æˆæœ¬æ§åˆ¶

#### Amazon CodeWhispererå‡çº§

- æ”¯æŒæ›´å¤šç¼–ç¨‹è¯­è¨€
- æ”¹è¿›çš„ä»£ç è¡¥å…¨åŠŸèƒ½
- å¢å¼ºçš„å®‰å…¨æ€§æ£€æŸ¥

### æ•°æ®åº“åˆ›æ–°

#### Amazon RDSæ–°åŠŸèƒ½

- æ”¯æŒæ–°çš„æ•°æ®åº“å¼•æ“ç‰ˆæœ¬
- æ”¹è¿›çš„æ€§èƒ½ç›‘æ§
- å¢å¼ºçš„å¤‡ä»½å’Œæ¢å¤

#### Amazon DynamoDBæ›´æ–°

- æ–°çš„ç´¢å¼•ç±»å‹
- æ”¹è¿›çš„æŸ¥è¯¢æ€§èƒ½
- æ›´å¥½çš„æˆæœ¬ä¼˜åŒ–

### è®¡ç®—æœåŠ¡è¿›å±•

#### Amazon EC2æ–°å®ä¾‹ç±»å‹

- é’ˆå¯¹AI/MLå·¥ä½œè´Ÿè½½ä¼˜åŒ–
- æ›´å¥½çš„æ€§èƒ½ä»·æ ¼æ¯”
- å¢å¼ºçš„ç½‘ç»œåŠŸèƒ½

#### AWS Lambdaæ”¹è¿›

- æ›´é•¿çš„æ‰§è¡Œæ—¶é—´é™åˆ¶
- æ”¹è¿›çš„å†·å¯åŠ¨æ€§èƒ½
- æ–°çš„è¿è¡Œæ—¶æ”¯æŒ

## é‡è¦ä¸»é¢˜æ¼”è®²

### é¦–å¸­æ‰§è¡Œå®˜ä¸»é¢˜æ¼”è®²

é‡ç‚¹è®¨è®ºäº†AIåœ¨ä¼ä¸šæ•°å­—åŒ–è½¬å‹ä¸­çš„ä½œç”¨ã€‚

### æŠ€æœ¯é¢†å¯¼è€…åˆ†äº«

å¤šä½æŠ€æœ¯é¢†å¯¼è€…åˆ†äº«äº†äº‘è®¡ç®—å’ŒAIçš„æœ€æ–°è¶‹åŠ¿ã€‚

## å®¢æˆ·æ¡ˆä¾‹

### é‡‘èæœåŠ¡è¡Œä¸š

å¤šå®¶é‡‘èæœºæ„åˆ†äº«äº†ä½¿ç”¨AWSæœåŠ¡å®ç°ä¸šåŠ¡è½¬å‹çš„ç»éªŒã€‚

### åˆ¶é€ ä¸šæ¡ˆä¾‹

åˆ¶é€ ä¸šå®¢æˆ·å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨AWS IoTå’ŒAIæœåŠ¡ä¼˜åŒ–ç”Ÿäº§æµç¨‹ã€‚

---

*æœ¬æ–‡æ¡£ç”¨äºæµ‹è¯•Quick-InsightåŠŸèƒ½åœ¨æŠ€æœ¯å†…å®¹ä¸Šçš„è¡¨ç°ã€‚*`
      },
      empty: {
        hash: '',
        title: 'æµ‹è¯•æ–‡ç« ï¼ˆæ— Quick-Insightï¼‰',
        titleEn: 'Test Article (No Quick-Insight)',
        content: `# æµ‹è¯•æ–‡ç« 

è¿™æ˜¯ä¸€ä¸ªç”¨äºæµ‹è¯•çš„æ–‡ç« ï¼Œæ²¡æœ‰å¯¹åº”çš„Quick-Insightç‰ˆæœ¬ã€‚

## ç›®çš„

ç”¨äºæµ‹è¯•å½“æ–‡ç« æ²¡æœ‰Quick-Insightç‰ˆæœ¬æ—¶çš„UIè¡Œä¸ºã€‚

## é¢„æœŸè¡Œä¸º

- ä¸åº”è¯¥æ˜¾ç¤ºæ¨¡å¼åˆ‡æ¢å™¨
- åªèƒ½ä½¿ç”¨Deep-Insightæ¨¡å¼
- ä¸åº”è¯¥æœ‰ç›¸å…³çš„APIè°ƒç”¨

## æµ‹è¯•è¦ç‚¹

1. æ£€æŸ¥æ˜¯å¦æ­£ç¡®éšè—äº†æ¨¡å¼åˆ‡æ¢å™¨
2. éªŒè¯é”™è¯¯å¤„ç†æ˜¯å¦æ­£å¸¸
3. ç¡®ä¿ç”¨æˆ·ä½“éªŒè‰¯å¥½

---

*è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ–‡æ¡£ï¼Œç”¨äºéªŒè¯Quick-InsightåŠŸèƒ½çš„è¾¹ç•Œæƒ…å†µå¤„ç†ã€‚*`
      }
    };
    
    const app = createApp({
      setup() {
        // çŠ¶æ€ç®¡ç†
        const content = ref('');
        const documentTitle = ref('');
        const documentTitleEn = ref('');
        const currentHash = ref('');
        const loading = ref(false);
        const error = ref('');
        const versions = ref([]);
        
        // æ–¹æ³•
        const loadHarariArticle = () => {
          const article = testArticles.harari;
          loadArticle(article);
        };
        
        const loadReInventArticle = () => {
          const article = testArticles.reinvent;
          loadArticle(article);
        };
        
        const loadEmptyArticle = () => {
          const article = testArticles.empty;
          loadArticle(article);
        };
        
        const loadArticle = (article) => {
          loading.value = true;
          error.value = '';
          
          // æ¨¡æ‹ŸåŠ è½½å»¶è¿Ÿ
          setTimeout(() => {
            try {
              content.value = marked.parse(article.content);
              documentTitle.value = article.title;
              documentTitleEn.value = article.titleEn;
              currentHash.value = article.hash;
              versions.value = [{ version: 1, date: '2024-01-01' }];
              
              showToast(`åŠ è½½æˆåŠŸ: ${article.title}`, 'success');
            } catch (err) {
              error.value = 'åŠ è½½æ–‡ç« å¤±è´¥';
              showToast('åŠ è½½æ–‡ç« å¤±è´¥', 'error');
            } finally {
              loading.value = false;
            }
          }, 500);
        };
        
        const getStatusClass = () => {
          if (loading.value) return 'loading';
          if (currentHash.value) return 'available';
          return 'unavailable';
        };
        
        const getStatusText = () => {
          if (loading.value) return 'åŠ è½½ä¸­...';
          if (currentHash.value) return 'Quick-Insight å¯ç”¨';
          return 'æ— Quick-Insight';
        };
        
        const handleInsightModeChange = (event) => {
          const { mode, hasQuickInsight } = event;
          console.log('æ¨¡å¼åˆ‡æ¢:', mode, 'æœ‰Quick-Insight:', hasQuickInsight);
          showToast(`åˆ‡æ¢åˆ° ${mode === 'quick' ? 'Quick-Insight' : 'Deep-Insight'} æ¨¡å¼`, 'info');
        };
        
        const handleQuickInsightLoad = (event) => {
          const { content } = event;
          console.log('Quick-Insightå†…å®¹åŠ è½½å®Œæˆï¼Œé•¿åº¦:', content.length);
          showToast('Quick-Insightå†…å®¹åŠ è½½å®Œæˆ', 'success');
        };
        
        const showToast = (message, type = 'info') => {
          if (window.eventBus) {
            window.eventBus.emit('show-toast', {
              type,
              message,
              duration: 3000
            });
          }
        };
        
        // åˆå§‹åŒ–
        onMounted(() => {
          console.log('Quick-Insight æµ‹è¯•é¡µé¢å·²åŠ è½½');
          showToast('Quick-Insight æµ‹è¯•é¡µé¢å·²åŠ è½½', 'info');
        });
        
        return {
          content,
          documentTitle,
          documentTitleEn,
          currentHash,
          loading,
          error,
          versions,
          loadHarariArticle,
          loadReInventArticle,
          loadEmptyArticle,
          getStatusClass,
          getStatusText,
          handleInsightModeChange,
          handleQuickInsightLoad
        };
      }
    });
    
    // åŠ è½½ç»„ä»¶
    const componentLoader = window.ComponentLoader;
    
    const components = [
      ['reading-view', '/components/views/ReadingView', 'ReadingView'],
      ['toast-container', '/components/common/ToastContainer', 'ToastContainer']
    ];
    
    componentLoader.registerComponents(app, components).then(() => {
      app.mount('#app');
      console.log('âœ… æµ‹è¯•åº”ç”¨å·²å¯åŠ¨');
    }).catch(error => {
      console.error('âŒ ç»„ä»¶åŠ è½½å¤±è´¥:', error);
    });
  </script>
</body>
</html> 